{"version":3,"sources":["components/utils/RadioList.tsx","family/UIConst.ts","components/common/UserList.tsx","components/organization/OrganizationForm.tsx","components/organization/Organization.tsx","components/organization/OrganizationList.tsx","components/organization/OrganizationListParts.tsx","components/organization/AllOrganizationList.tsx"],"names":["RadioList","props","_this","Object","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","curVal","e","target","value","setState","onChange","_this2","that","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","data","map","item","key","type","name","disabled","checked","data-log","handleChange","label","Component","connect","FORM","RADIO_LIST_DATA_VISIBILITY","YUP_MSG","n","concat","debounce","require","useStyles","makeStyles","theme","createStyles","root","flexGrow","marginBottom","spacing","input","display","padding","height","valueContainer","flexWrap","flex","alignItems","overflow","chip","margin","chipFocused","backgroundColor","emphasize","palette","grey","noOptionsMessage","singleValue","fontSize","placeholder","position","left","bottom","paper","zIndex","marginTop","right","divider","inputComponent","_ref","inputRef","objectWithoutProperties","react_default","assign","ref","components","Control","TextField","style","minWidth","selectProps","InputProps","inputProps","objectSpread","classes","innerRef","children","innerProps","TextFieldProps","Menu","Paper","square","MultiValue","Chip","tabIndex","clsx","defineProperty","isFocused","onDelete","removeProps","onClick","deleteIcon","Cancel_default","NoOptionsMessage","Typography","color","Option","MenuItem","selected","component","fontWeight","isSelected","Placeholder","SingleValue","ValueContainer","UserList","useTheme","loadOptions","isMulti","options","selectStyles","base","text","primary","& input","font","commonProps","cacheOptions","defaultValue","_ref2","inputValue","trim","vals","Array","isArray","x","id","fullname","NoSsr","dist_react_select_browser_esm","react_select_browser_esm","styles","InputLabelProps","shrink","Error","appBar","title","marginLeft","preview","form","minHeight","formTitle","formItem","ctl","schema","Yup","shape","required","max","description","FORM_STATE_INIT","members","visibility","Transition","React","forwardRef","Slide","direction","OrganizationForm","open","onClose","organization","auth","useSelector","dispatch","useDispatch","Dialog","TransitionComponent","DialogTitle","DialogContent","dividers","formik_esm","initialValues","validationSchema","onSubmit","values","addOrUpdateOrganization","updateOrganization","addOrganization","memberIds","user","owner","newOwner","ownerId","refresh","render","isSubmitting","setFieldValue","loadUserOptions","Promise","_ref3","asyncToGenerator","regenerator_default","mark","_callee","resolve","users","wrap","_context","prev","next","AccountService","fetchUserList","sent","_","empId","email","stop","_x","apply","arguments","common_UserList","val","fullWidth","Button","variant","avatar","OrganizationBlock","_useState","useState","_useState2","slicedToArray","update","setUpdate","owned","joined","find","index_esm","react_router_dom","to","organization_OrganizationForm","handleDelete","handleExit","utils","content","alt","src","OrganizationList","_this$props","organizations","length","Organization","contextTypes","store","PropTypes","object","childContextTypes","history","location","match","onAddOrganization","func","onDeleteOrganization","onUpdateOrganization","getChildContext","mapDispatchToProps","deleteOrganization","CreateButton","setOpen","OrganizationsTypeDropdown","url","Select","push","SearchGroup","router","_useState3","_useState4","query","setQuery","useEffect","autoComplete","onKeyUp","which","_router$location","pathname","hash","search","uri","URI","removeSearch","setSearch","href","handleSearch","width","preventDefault","message","window","confirm","context","replaceLocation","handleJoin","_this$context","toConsumableArray","_this3","_this$context2","filter","OrganizationListWithSpin","fetching","organization_OrganizationList","PaginationWithLocation","_Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","inherits","createClass","calculated","JoinedOrganizationList","_OrganizationListParts__WEBPACK_IMPORTED_MODULE_7__","params","pagination"],"mappings":"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","file":"static/js/11.774fcf34.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport './RadioList.css'\r\n\r\n/**\r\n *\r\n * @param {*} props  { label : [String], value : [String] }\r\n */\r\n\r\nclass RadioList extends Component<any, any> {\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = { curVal: props.curVal }\r\n  }\r\n\r\n  handleChange(e: any) {\r\n    if (e.target.value !== this.state.curVal) {\r\n      this.setState({ curVal: e.target.value })\r\n      this.props.onChange && this.props.onChange(e.target.value)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // tslint:disable-next-line: no-this-assignment\r\n    const that = this\r\n    return (\r\n      <div className=\"ctl-radio-list\">\r\n        {\r\n          this.props.data.map((item: any) =>\r\n            <label className=\"label mr8\" key={item.value}>\r\n              <input\r\n                className=\"input\"\r\n                type=\"radio\"\r\n                name={that.props.name}\r\n                value={item.value}\r\n                disabled={that.props.disabled}\r\n                checked={this.state.curVal + '' === item.value + ''}\r\n                data-log={typeof this.state.curVal + '|' + typeof item.value}\r\n                onChange={e => that.handleChange(e)}\r\n              />\r\n              {item.label}\r\n            </label>)\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = () => ({})\r\nconst mapDispatchToProps = ({})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(RadioList)\r\n","export const FORM = {\r\n  RADIO_LIST_DATA_VISIBILITY: [\r\n    { 'label': '私有', 'value': false },\r\n    { 'label': '公开', 'value': true },\r\n  ],\r\n}\r\n\r\nexport const YUP_MSG = {\r\n  REQUIRED: '必填项',\r\n  MAX_LENGTH: (n: number) => `长度不能超过${n}`,\r\n  MIN_LENGTH: (n: number) => `长度不能少于${n}`,\r\n  PHOTO_REQUIRED: '请选择图片',\r\n}\r\n","import React, { HTMLAttributes } from 'react'\r\nimport { Chip, Typography, MenuItem, TextField, NoSsr, Paper } from '@material-ui/core'\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport { createStyles, makeStyles, useTheme, Theme } from '@material-ui/core/styles'\r\nimport { BaseTextFieldProps } from '@material-ui/core/TextField'\r\nimport Select from 'react-select'\r\nimport clsx from 'clsx'\r\nimport { NoticeProps, MenuProps } from 'react-select/src/components/Menu'\r\nimport { ControlProps } from 'react-select/src/components/Control'\r\nimport { PlaceholderProps } from 'react-select/src/components/Placeholder'\r\nimport { SingleValueProps } from 'react-select/src/components/SingleValue'\r\nimport { ValueContainerProps } from 'react-select/src/components/containers'\r\nimport { MultiValueProps } from 'react-select/src/components/MultiValue'\r\nimport AsyncSelect from 'react-select/async'\r\nimport { OptionProps } from 'react-select/src/components/Option'\r\nimport { INumItem, User } from '../../actions/types'\r\n\r\nconst debounce = require('debounce-promise')\r\n\r\ninterface OptionType {\r\n  label: string\r\n  value: string\r\n}\r\n\r\nexport type SelectedItem = Pick<User, 'id' | 'fullname'>\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n    input: {\r\n      display: 'flex',\r\n      padding: 0,\r\n      height: 'auto',\r\n    },\r\n    valueContainer: {\r\n      display: 'flex',\r\n      flexWrap: 'wrap',\r\n      flex: 1,\r\n      alignItems: 'center',\r\n      overflow: 'hidden',\r\n    },\r\n    chip: {\r\n      margin: theme.spacing(0.5, 0.25),\r\n    },\r\n    chipFocused: {\r\n      backgroundColor: emphasize(\r\n        theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n        0.08\r\n      ),\r\n    },\r\n    noOptionsMessage: {\r\n      padding: theme.spacing(1, 2),\r\n    },\r\n    singleValue: {\r\n      fontSize: 16,\r\n    },\r\n    placeholder: {\r\n      position: 'absolute',\r\n      left: 2,\r\n      bottom: 6,\r\n      fontSize: 16,\r\n    },\r\n    paper: {\r\n      position: 'absolute',\r\n      zIndex: 1,\r\n      marginTop: theme.spacing(1),\r\n      left: 0,\r\n      right: 0,\r\n    },\r\n    divider: {\r\n      height: theme.spacing(2),\r\n    },\r\n  })\r\n)\r\n\r\nfunction NoOptionsMessage(props: NoticeProps<OptionType>) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  )\r\n}\r\n\r\ntype InputComponentProps = Pick<BaseTextFieldProps, 'inputRef'> & HTMLAttributes<HTMLDivElement>\r\n\r\nfunction inputComponent({ inputRef, ...props }: InputComponentProps) {\r\n  return <div ref={inputRef} {...props} />\r\n}\r\n\r\nfunction Control(props: ControlProps<OptionType>) {\r\n  return (\r\n    <TextField\r\n      style={{ minWidth: props.selectProps.minWidth || 350 }}\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.TextFieldProps}\r\n    />\r\n  )\r\n}\r\n\r\nfunction Option(props: OptionProps<OptionType>) {\r\n  return (\r\n    <MenuItem\r\n      ref={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  )\r\n}\r\n\r\nfunction Placeholder(props: PlaceholderProps<OptionType>) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  )\r\n}\r\n\r\nfunction SingleValue(props: SingleValueProps<OptionType>) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  )\r\n}\r\n\r\nfunction ValueContainer(props: ValueContainerProps<OptionType>) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>\r\n}\r\n\r\nfunction MultiValue(props: MultiValueProps<OptionType>) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={clsx(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  )\r\n}\r\n\r\nfunction Menu(props: MenuProps<OptionType>) {\r\n  return (\r\n    <Paper square={true} className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  )\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n}\r\n\r\ninterface Props {\r\n  loadOptions?: (input: string) => Promise<INumItem[]>\r\n  options?: INumItem[]\r\n  isMulti?: boolean\r\n  selected?: INumItem[]\r\n  value?: INumItem[]\r\n  minWidth?: number\r\n  onChange: (selected: SelectedItem[]) => void\r\n}\r\n\r\nfunction UserList(props: Props) {\r\n  const classes = useStyles()\r\n  const theme = useTheme()\r\n  const { loadOptions, isMulti, onChange, options, selected, value, minWidth } = props\r\n  const selectStyles = {\r\n    input: (base: any) => ({\r\n      ...base,\r\n      color: theme.palette.text.primary,\r\n      '& input': {\r\n        font: 'inherit',\r\n      },\r\n    }),\r\n  }\r\n  const commonProps: any = {\r\n    minWidth,\r\n    cacheOptions: true,\r\n    defaultValue: selected || [],\r\n    isMulti: isMulti || false,\r\n    noOptionsMessage: ({ inputValue }: { inputValue: string }) => {\r\n      return inputValue && inputValue.trim()\r\n        ? '搜不到数据'\r\n        : '请输入检索关键字'\r\n    },\r\n    onChange: (vals: INumItem[] | INumItem) => {\r\n      if (Array.isArray(vals)) {\r\n        onChange(vals.map(x => ({ id: x.value, fullname: x.label })))\r\n      } else {\r\n        onChange([{ id: vals.value, fullname: vals.label }])\r\n      }\r\n    },\r\n    placeholder: `请选择(${isMulti ? '多选' : '单选'})`,\r\n  }\r\n\r\n  if (value) {\r\n    (commonProps as any).value = value\r\n  }\r\n\r\n  if (loadOptions) {\r\n    return (\r\n      <div className={classes.root}>\r\n        <NoSsr>\r\n          <AsyncSelect\r\n            classes={classes}\r\n            loadOptions={debounce(loadOptions, 250)}\r\n            components={components}\r\n            {...commonProps}\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    )\r\n  } else if (options) {\r\n    return (\r\n      <div className={classes.root}>\r\n        <NoSsr>\r\n          <Select\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            TextFieldProps={{\r\n              InputLabelProps: {\r\n                shrink: true,\r\n              },\r\n            }}\r\n            options={options as any}\r\n            components={components}\r\n            {...commonProps}\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    )\r\n  } else {\r\n    throw new Error(\r\n      'One of props.options and props.loadOptions is required.'\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserList\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport RadioList from '../utils/RadioList'\r\nimport { FORM, YUP_MSG } from '../../family/UIConst'\r\nimport { Formik, Field, Form } from 'formik'\r\nimport { TextField } from 'formik-material-ui'\r\nimport * as Yup from 'yup'\r\nimport { Button, Theme, Dialog, Slide, DialogContent, DialogTitle } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/styles'\r\nimport { TransitionProps } from '@material-ui/core/transitions/transition'\r\nimport { Organization, RootState } from '../../actions/types'\r\nimport UserList from '../common/UserList'\r\nimport AccountService from '../../relatives/services/Account'\r\nimport * as _ from 'lodash'\r\nimport { updateOrganization, addOrganization } from '../../actions/organization'\r\nimport { refresh } from '../../actions/common'\r\n\r\nconst useStyles = makeStyles(({ spacing }: Theme) => ({\r\n  root: {\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: spacing(2),\r\n    flex: 1,\r\n  },\r\n  preview: {\r\n    marginTop: spacing(1),\r\n  },\r\n  form: {\r\n    minWidth: 500,\r\n    minHeight: 300,\r\n  },\r\n  formTitle: {\r\n    color: 'rgba(0, 0, 0, 0.54)',\r\n    fontSize: 9,\r\n  },\r\n  formItem: {\r\n    marginBottom: spacing(1),\r\n  },\r\n  ctl: {\r\n    marginTop: spacing(3),\r\n  },\r\n}))\r\n\r\nconst schema = Yup.object().shape<Partial<Organization>>({\r\n  name: Yup.string().required(YUP_MSG.REQUIRED).max(20, YUP_MSG.MAX_LENGTH(20)),\r\n  description: Yup.string().max(1000, YUP_MSG.MAX_LENGTH(1000)),\r\n})\r\n\r\nconst FORM_STATE_INIT: Organization = {\r\n  id: 0,\r\n  name: '',\r\n  description: '',\r\n  members: [],\r\n  visibility: false,\r\n}\r\n\r\nconst Transition = React.forwardRef<unknown, TransitionProps>((props, ref) => {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />\r\n})\r\n\r\ninterface Props {\r\n  open: boolean\r\n  onClose: (isOk?: boolean) => void\r\n  organization?: Organization\r\n}\r\n\r\nfunction OrganizationForm(props: Props) {\r\n  const { open, onClose, organization } = props\r\n  const auth = useSelector((state: RootState) => state.auth)\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={() => onClose()}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <DialogTitle>新建团队</DialogTitle>\r\n      <DialogContent dividers={true}>\r\n        <div className={classes.form}>\r\n          <Formik\r\n            initialValues={{\r\n              ...FORM_STATE_INIT,\r\n              ...(organization || {}),\r\n            }}\r\n            validationSchema={schema}\r\n            onSubmit={(values) => {\r\n              const addOrUpdateOrganization = values.id ? updateOrganization : addOrganization\r\n              const organization: Organization = {\r\n                ...values,\r\n                memberIds: (values.members || []).map(user => user.id),\r\n              }\r\n              const { owner, newOwner } = values\r\n              if (newOwner && newOwner.id !== owner!.id) { organization.ownerId = newOwner.id }\r\n              dispatch(addOrUpdateOrganization(organization, () => {\r\n                dispatch(refresh())\r\n                onClose(true)\r\n              }))\r\n            }}\r\n            render={({ isSubmitting, setFieldValue, values }) => {\r\n              function loadUserOptions(input: string): Promise<Array<{ label: string, value: number }>> {\r\n                return new Promise(async (resolve) => {\r\n                  const users = await AccountService.fetchUserList({ name: input })\r\n                  const options = _.differenceWith(users.data, values.members || [], _.isEqual)\r\n                  resolve(options.map(x => ({ label: `${x.fullname} ${x.empId || x.email}`, value: x.id })))\r\n                })\r\n              }\r\n              return (\r\n                <Form>\r\n                  <div className=\"rmodal-body\">\r\n                    {values.id > 0 &&\r\n                      <div className={classes.formItem}>\r\n                        <div className={classes.formTitle}>项目Owner</div>\r\n                        {values.owner && (values.owner.id === auth.id)\r\n                          ? <UserList\r\n                            isMulti={false}\r\n                            value={values.newOwner ? [{ label: values.newOwner.fullname, value: values.newOwner.id }] : []}\r\n                            loadOptions={loadUserOptions}\r\n                            onChange={(users: any) => setFieldValue('newOwner', users[0])}\r\n                          />\r\n                          : <div className=\"pt7 pl9\">{values.owner!.fullname}</div>\r\n                        }\r\n                      </div>\r\n                    }\r\n                    <div className={classes.formItem}>\r\n                      <RadioList\r\n                        data={FORM.RADIO_LIST_DATA_VISIBILITY}\r\n                        curVal={values.visibility}\r\n                        name=\"visibility\"\r\n                        onChange={(val: any) => setFieldValue('visibility', val)}\r\n                      />\r\n                    </div>\r\n                    <div className={classes.formItem}>\r\n                      <Field\r\n                        name=\"name\"\r\n                        label=\"团队名称\"\r\n                        component={TextField}\r\n                        fullWidth={true}\r\n                      />\r\n                    </div>\r\n                    <div className={classes.formItem}>\r\n                      <Field\r\n                        name=\"description\"\r\n                        label=\"描述\"\r\n                        component={TextField}\r\n                        fullWidth={true}\r\n                      />\r\n                    </div>\r\n                    <div className={classes.formItem}>\r\n                      <div className={classes.formTitle}>项目成员</div>\r\n                      <UserList\r\n                        isMulti={true}\r\n                        loadOptions={loadUserOptions}\r\n                        selected={values.members!.map(x => ({ label: x.fullname, value: x.id }))}\r\n                        onChange={selected => setFieldValue('members', selected)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className={classes.ctl}>\r\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\" className=\"mr1\" disabled={isSubmitting}>提交</Button>\r\n                    <Button onClick={() => onClose()} disabled={isSubmitting}>取消</Button>\r\n                  </div>\r\n                </Form>\r\n              )\r\n            }}\r\n          />\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default OrganizationForm\r\n","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Popover } from '../utils'\r\nimport OrganizationForm from './OrganizationForm'\r\nimport { GoOrganization } from 'react-icons/go'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState, Organization } from '../../actions/types'\r\nimport { handleDelete, handleExit, handleJoin } from './OrganizationListParts'\r\n\r\nfunction avatar(user: any) {\r\n  return `https://work.alibaba-inc.com/photo/${user.empId}.220x220.jpg`\r\n}\r\n\r\ninterface Props {\r\n  organization: Organization\r\n}\r\n\r\nfunction OrganizationBlock(props: Props) {\r\n  const { organization } = props\r\n  const auth = useSelector((state: RootState) => state.auth)\r\n  const [update, setUpdate] = useState(false)\r\n  const owned = organization.owner && organization.owner.id === auth.id\r\n  const joined = organization.members!.find(user => user.id === auth.id)\r\n  const selfHelpJoin = false // DONE 2.1 不允许自助加入团队\r\n  return (\r\n    <section className=\"Organization card\">\r\n      <div className=\"card-block\">\r\n        <div className=\"header clearfix\">\r\n          <span className=\"title\">\r\n            <GoOrganization className=\"mr6 color-9\" />\r\n            <Link to={`/organization/repository?organization=${organization.id}`} >{organization.name}</Link>\r\n          </span>\r\n          <span className=\"toolbar\">\r\n            {owned || joined ? ( // 拥有或已加入\r\n              <span className=\"fake-link operation mr5\" onClick={() => setUpdate(true)}>编辑</span>\r\n            ) : null}\r\n            <OrganizationForm organization={organization} open={update} onClose={() => setUpdate(false)} />\r\n            {owned ? ( // 拥有\r\n              <Link to=\"\" onClick={e => handleDelete(e, organization)} className=\"operation mr5\">删除</Link>\r\n            ) : null}\r\n            {!owned && joined ? ( // 不拥有，已加入\r\n              <Link to=\"\" onClick={e => handleExit(e, organization)} className=\"operation mr5\">退出</Link>\r\n            ) : null}\r\n            {!owned && !joined && selfHelpJoin ? ( // 不拥有，未加入\r\n              <Link to=\"\" onClick={e => handleJoin(e, organization)} className=\"operation mr5\">加入</Link>\r\n            ) : null}\r\n          </span>\r\n        </div>\r\n        <div className=\"body\">\r\n          <div className=\"desc\">{organization.description}</div>\r\n          <div className=\"members\">\r\n            <Popover content={`${organization.owner!.fullname} ${organization.owner!.id}`}>\r\n              <img alt={organization.owner!.fullname} src={avatar(organization.owner)} className=\"avatar owner\" />\r\n            </Popover>\r\n            {organization.members!.map(user =>\r\n              <Popover key={user.id} content={`${user.fullname} ${user.id}`}>\r\n                <img alt={user.fullname} title={user.fullname} src={avatar(user)} className=\"avatar\" />\r\n              </Popover>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default OrganizationBlock\r\n","import React, { Component } from 'react'\r\nimport { PropTypes } from '../../family'\r\nimport Organization from './Organization'\r\n\r\n// 展示组件\r\nclass OrganizationList extends Component<any, any> {\r\n  // DONE 2.1 补全 propTypes\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    organizations: PropTypes.array.isRequired,\r\n  }\r\n  render() {\r\n    const { name, organizations } = this.props\r\n    if (!organizations.length) {\r\n      return name\r\n        ? <div className=\"fontsize-14 text-center p40\">没有找到匹配 <strong>{name}</strong> 的团队。</div>\r\n        : <div className=\"fontsize-14 text-center p40\">没有数据。</div>\r\n    }\r\n    return (\r\n      <div className=\"OrganizationList\">\r\n        {organizations.map((organization: any) =>\r\n          <Organization key={organization.id} organization={organization} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default OrganizationList\r\n","import React, { Component, useState, useEffect } from 'react'\r\nimport { PropTypes, push, replace, URI, StoreStateRouterLocationURI } from '../../family'\r\nimport { Spin, Pagination } from '../utils'\r\nimport OrganizationList from './OrganizationList'\r\nimport OrganizationForm from './OrganizationForm'\r\nimport { addOrganization, deleteOrganization, updateOrganization } from '../../actions/organization'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Select, MenuItem, TextField, Button } from '@material-ui/core'\r\nimport { RootState } from 'actions/types'\r\n\r\nexport const contextTypes = {\r\n  store: PropTypes.object,\r\n}\r\n\r\nexport const childContextTypes = {\r\n  history: PropTypes.object,\r\n  location: PropTypes.object,\r\n  match: PropTypes.object,\r\n  onAddOrganization: PropTypes.func,\r\n  onDeleteOrganization: PropTypes.func,\r\n  onUpdateOrganization: PropTypes.func,\r\n  auth: PropTypes.object,\r\n}\r\n\r\nexport function getChildContext(this: any) {\r\n  const { history, location, match, onAddOrganization, onDeleteOrganization, onUpdateOrganization, auth } = this.props\r\n  return { history, location, match, onAddOrganization, onDeleteOrganization, onUpdateOrganization, auth }\r\n}\r\n\r\nexport const mapDispatchToProps = ({\r\n  onAddOrganization: addOrganization,\r\n  onDeleteOrganization: deleteOrganization,\r\n  onUpdateOrganization: updateOrganization,\r\n})\r\n\r\nexport function CreateButton() {\r\n  const [open, setOpen] = useState(false)\r\n  return (\r\n    <span className=\"float-right ml10\">\r\n      <Button className=\"OrganizationCreateButton\" variant=\"contained\" color=\"primary\" onClick={() => setOpen(true)}> 新建团队 </Button>\r\n      <OrganizationForm open={open} onClose={() => setOpen(false)} />\r\n    </span>\r\n  )\r\n}\r\n\r\n// TODO 2.2 <select> => <Dropdown>\r\nexport function OrganizationsTypeDropdown({ url }: { url: string }) {\r\n  const dispatch = useDispatch()\r\n  const handlePush = (url: string) => {\r\n    dispatch(push(url))\r\n  }\r\n\r\n  return (\r\n    <Select\r\n      className=\"mr8\"\r\n      value={url}\r\n      onChange={e => handlePush(e.target.value as string)}\r\n    >\r\n      <MenuItem value=\"/organization/joined\">我的团队</MenuItem>\r\n      <MenuItem value=\"/organization/all\">全部团队</MenuItem>\r\n    </Select>\r\n  )\r\n}\r\n\r\nexport function SearchGroup(props: { name: string }) {\r\n  const { name } = props\r\n  const dispatch = useDispatch()\r\n  const router = useSelector((state: RootState) => state.router)\r\n  const [query, setQuery] = useState('')\r\n  const handleSearch = () => {\r\n    const { pathname, hash, search } = router.location\r\n    const uri = URI(pathname + hash + search).removeSearch('cursor')\r\n    query ? uri.setSearch('name', query) : uri.removeSearch('name')\r\n    dispatch(push(uri.href()))\r\n  }\r\n  useEffect(() => {\r\n    setQuery(name)\r\n  }, [name])\r\n  return (\r\n    <TextField\r\n      value={query || ''}\r\n      placeholder=\"搜索仓库：名称、ID\"\r\n      autoComplete=\"off\"\r\n      onChange={e => setQuery(e.target.value.trim())}\r\n      onKeyUp={e => e.which === 13 && handleSearch()}\r\n      style={{ width: 200 }}\r\n    />\r\n  )\r\n}\r\n\r\n// DONE 把控制钱从 Dialog 移动到 Component 中！\r\n// DONE 2.1 通常应该用 replaceLocation\r\n// DONE 2.1 删除确认\r\nexport function handleDelete(this: any, e: any, organization: any) {\r\n  e.preventDefault()\r\n  const message = `团队被删除后不可恢复！\\n确认继续删除『#${organization.id} ${organization.name}』吗？`\r\n  if (!window.confirm(message)) { return }\r\n  const { onDeleteOrganization } = this.context\r\n  onDeleteOrganization(organization.id, () => {\r\n    this.replaceLocation()\r\n  })\r\n}\r\n\r\n// DONE 重构表之间的对应关系，分为多张表。否则每次更新成员都会导致当前团队排到第一位！待测试。\r\nexport function replaceLocation(this: any) {\r\n  const { router } = this.props\r\n  const uri = StoreStateRouterLocationURI(router)\r\n  replace(uri.href())\r\n}\r\n\r\nexport function handleJoin(this: any, e: any, organization: any) {\r\n  e.preventDefault()\r\n  const { auth, onUpdateOrganization } = this.context\r\n  const next = {\r\n    id: organization.id,\r\n    memberIds: [...organization.members.map((user: any) => user.id), auth.id],\r\n  }\r\n  onUpdateOrganization(next, () => {\r\n    this.replaceLocation()\r\n  })\r\n}\r\n\r\nexport function handleExit(this: any, e: any, organization: any) {\r\n  e.preventDefault()\r\n  const message = `确认继续退出『#${organization.id} ${organization.name}』吗？`\r\n  if (!window.confirm(message)) { return }\r\n  const { auth, onUpdateOrganization } = this.context\r\n  const next = {\r\n    id: organization.id,\r\n    memberIds: organization.members.filter((user: any) => user.id !== auth.id).map((user: any) => user.id),\r\n  }\r\n  onUpdateOrganization(next, () => {\r\n    this.replaceLocation()\r\n  })\r\n}\r\n\r\nexport const OrganizationListWithSpin = ({ name, organizations }: any) => (\r\n  organizations.fetching\r\n    ? <Spin />\r\n    : <OrganizationList name={name} organizations={organizations.data} />\r\n)\r\n\r\nexport class PaginationWithLocation extends Component<any, any> {\r\n  static contextTypes = {\r\n    location: PropTypes.object,\r\n  }\r\n  render() {\r\n    const { calculated } = this.props\r\n    const { location } = this.context\r\n    return <Pagination location={location} calculated={calculated} />\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { contextTypes, childContextTypes, getChildContext, CreateButton, OrganizationsTypeDropdown, SearchGroup, OrganizationListWithSpin, PaginationWithLocation, mapDispatchToProps } from './OrganizationListParts'\r\nimport './Organization.css'\r\nimport { RootState } from 'actions/types'\r\n\r\n// 所有团队\r\nclass JoinedOrganizationList extends Component<any, any> {\r\n  static contextTypes = contextTypes\r\n  static childContextTypes = childContextTypes\r\n  getChildContext = getChildContext\r\n  render() {\r\n    const { location, match, organizations } = this.props\r\n    return (\r\n      <section className=\"OrganizationListWrapper\">\r\n        <nav className=\"toolbar clearfix\">\r\n          <OrganizationsTypeDropdown url={match.url} />\r\n          <SearchGroup name={location.params.name} />\r\n          <CreateButton />\r\n        </nav>\r\n        <div className=\"body\">\r\n          <OrganizationListWithSpin name={location.params.name} organizations={organizations} />\r\n        </div>\r\n        <div className=\"footer\">\r\n          <PaginationWithLocation calculated={organizations.pagination} />\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n  organizations: state.organizations,\r\n})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(JoinedOrganizationList)\r\n"],"sourceRoot":""}