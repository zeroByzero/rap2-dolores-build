(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{407:function(_,e,t){},573:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(22),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20),D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(21),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__),_family__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(58),_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(37),_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4),_Tester_css__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(407),_Tester_css__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_Tester_css__WEBPACK_IMPORTED_MODULE_12__),Tester=function(_Component){function Tester(props){var _this;return Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,Tester),_this=Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__.a)(this,Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.a)(Tester).call(this,props)),_this.switchMod=function(){},_this.switchItf=function(_){var e=_.properties.map(function(_){return Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},_)}).filter(function(_){return"request"===_.scope}),t=_utils__WEBPACK_IMPORTED_MODULE_10__.m.treeToJson(_utils__WEBPACK_IMPORTED_MODULE_10__.m.arrayToTree(e)),r=_family__WEBPACK_IMPORTED_MODULE_9__.c.mock(t);_this.setState({requestData:r},function(){_this.handleRequest(_)})},_this.handleRequest=function(itf){var requests=[fetch("".concat(_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__.c,"/app/mock/template/").concat(itf.id)).then(function(_){return _.json()}),fetch("".concat(_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__.c,"/app/mock/schema/").concat(itf.id)).then(function(_){return _.json()})],requestData=_this.state.requestData,uri=Object(_family__WEBPACK_IMPORTED_MODULE_9__.h)("".concat(_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__.c,"/app/mock/data/").concat(itf.id));for(var key in requestData)""===requestData[key]?uri.removeSearch(key):uri.setSearch(key,requestData[key]);requests.push(fetch(uri.toString()).then(function(_){return _.json()}));var repositoryId=itf.repositoryId,method=itf.method,url=itf.url,target="".concat(_this.state.target,"/app/mock/").concat(repositoryId,"/").concat(method,"/").concat(url),proxy="".concat(_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__.c,"/proxy?target=").concat(target);requests.push(fetch(proxy).then(function(_){return _.json()})),Promise.all(requests).then(function(_ref){var _ref2=Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_ref,4),template=_ref2[0],schema=_ref2[1],data=_ref2[2],target=_ref2[3];_this.setState({template:template,schema:schema,data:data});var _Mock$valid=_family__WEBPACK_IMPORTED_MODULE_9__.c.valid,Diff=_Mock$valid.Diff,Assert=_Mock$valid.Assert,nextMatch=Assert.match;Assert.match=function(type,path,actual,expected,result,message){"string"===typeof expected&&(expected=eval("("+expected+")")),nextMatch(type,path,actual,expected,result,message)};var result=Diff.diff(schema,target),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=result[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var item=_step.value;console.warn(Assert.message(item))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}})},_this.updateRequestData=function(_,e,t){_this.setState({requestData:Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},_this.state.requestData,Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},e,t))})},_this.state={requestData:{},template:null,schema:null,data:null,target:_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__.c},_this}return Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__.a)(Tester,_Component),Object(D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Tester,[{key:"render",value:function(){var _=this,e=this.context.store,t=this.props.location.params,r=this.props.repository;if(!r.fetching&&!r.data)return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"p100 fontsize-40 text-center"},"404");if(!(r=r.data).id)return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_utils__WEBPACK_IMPORTED_MODULE_10__.l,null);var a=r&&r.modules&&r.modules.length?r.modules.find(function(_){return _.id===+t.mod})||r.modules[0]:{},s=a.interfaces&&a.interfaces.length?a.interfaces.find(function(_){return _.id===+t.itf})||a.interfaces[0]:{},o=this.state.requestData,c=Object(_family__WEBPACK_IMPORTED_MODULE_9__.h)("".concat(_relatives_services_constant__WEBPACK_IMPORTED_MODULE_11__.c,"/app/mock/data/").concat(s.id));for(var l in o)""===o[l]?c.removeSearch(l):c.setSearch(l,o[l]);var n=Object(_family__WEBPACK_IMPORTED_MODULE_9__.f)(e).removeSearch("itf");return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("section",{className:"Tester"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"header"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-mods clearfix"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-title"},"\u6a21\u5757\uff1a"),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("ul",{className:"clearfix"},r.modules.map(function(_){return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("li",{key:_.id,className:_.id===a.id?"active":""},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_family__WEBPACK_IMPORTED_MODULE_9__.b,{to:n.setSearch("mod",_.id).href()},_.name))}))),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-itfs clearfix"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-title"},"\u63a5\u53e3\uff1a"),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("ul",{className:"clearfix"},a.interfaces.map(function(e){return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("li",{key:e.id,className:e.id===s.id?"active":""},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_family__WEBPACK_IMPORTED_MODULE_9__.b,{to:n.setSearch("mod",a.id).setSearch("itf",e.id).href(),onClick:function(){return _.switchItf(e)}},e.name))})))),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"body"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-props clearfix"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("form",{onSubmit:function(e){e.preventDefault(),_.handleRequest(s)}},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"mb6 ml6 font-bold"},"\u4e1a\u52a1\u7cfb\u7edf\uff1a"),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("input",{value:this.state.target,onChange:function(e){return _.setState({target:e.target.value})},className:"form-control"}),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("ul",{className:"fields clearfix"},Object.keys(o).map(function(e){return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("li",{key:e,className:"filed"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"label"},e),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("input",{value:o[e],onChange:function(t){return _.updateRequestData(t,e,t.target.value)},className:"form-control"}))})),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("button",{className:"btn btn-success",type:"submit"},"Submit"))),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-result"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",{className:"card-title"},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_family__WEBPACK_IMPORTED_MODULE_9__.b,{to:c.href(),target:"_blank",rel:"noopener noreferrer"},decodeURI(c.href()))),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("pre",null,JSON.stringify(this.state.data,null,2))))))}}]),Tester}(react__WEBPACK_IMPORTED_MODULE_8__.Component);Tester.contextTypes={store:_family__WEBPACK_IMPORTED_MODULE_9__.d.object.isRequired};var mapStateToProps=function(_){return{repository:_.repository}},mapDispatchToProps={};__webpack_exports__.default=Object(_family__WEBPACK_IMPORTED_MODULE_9__.j)(mapStateToProps,mapDispatchToProps)(Tester)}}]);
//# sourceMappingURL=18.251926da.chunk.js.map