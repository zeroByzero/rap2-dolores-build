(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{267:function(e,t,a){"use strict";var r=a(3),n=a(18),o=a(19),l=a(22),c=a(20),s=a(21),i=a(0),m=a.n(i),u=a(8),d=a.n(u),p=a(26),h=(a(95),a(37)),f=a(65),b=a(256),v=a(9),E=function(){return{name:"",description:"",members:[],ownerId:void 0,organizationId:void 0,collaboratorIds:[]}},y=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).rparsley=void 0,a.handleSubmit=function(e){if(e.preventDefault(),a.rparsley.isValid()){var t=a.props,n=t.addRepository,o=t.updateRepository,l=a.state.id?o:n,c=a.props.organization,s=Object(r.a)({},a.state,{organizationId:c?c.id:null,memberIds:(a.state.members||[]).map(function(e){return e.id})}),i=a.state,m=i.owner,u=i.newOwner;u&&u.id!==m.id&&(s.ownerId=u.id);var d=a.context.rmodal;d.close(),l(s,function(){d&&d.resolve()})}};var o=e.repository;return a.state=o?Object(r.a)({},o,{collaboratorIds:o.collaborators.map(function(e){return e.id}),newOwner:o.owner}):E(),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.context.rmodal,a=this.props.auth;return m.a.createElement("section",{className:"RepositoryForm"},m.a.createElement("div",{className:"rmodal-header"},m.a.createElement("span",{className:"rmodal-title"},this.props.title)),m.a.createElement(h.i,{ref:function(t){e.rparsley=t}},m.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.a.createElement("div",{className:"rmodal-body"},this.state.id&&m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u62e5\u6709\u8005\uff1a"),m.a.createElement("div",{className:"col-sm-10"},this.state.owner&&this.state.owner.id===a.id?m.a.createElement(h.b,{value:this.state.newOwner?[this.state.newOwner]:[],limit:1,onChange:function(t){return e.setState({newOwner:t[0]})}}):m.a.createElement("div",{className:"pt7 pl9"},this.state.owner.fullname))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u540d\u79f0\uff1a"),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement("input",{name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},className:"form-control",placeholder:"Name",spellCheck:!1,autoComplete:"off",autoFocus:!0,required:!0,"data-parsley-trigger":"change keyup","data-parsley-maxlength":"256"}))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u7b80\u4ecb\uff1a"),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement(h.k,{name:"description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},className:"form-control",placeholder:"Description",spellCheck:!1,rows:"5","data-parsley-trigger":"change keyup","data-parsley-maxlength":"1024"}))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u6210\u5458\uff1a"),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement(h.b,{value:this.state.members,onChange:function(t){return e.setState({members:t})}}))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u534f\u540c\u4ed3\u5e93\uff1a"),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement("input",{name:"name",value:this.state.collaboratorIds.join(","),onChange:function(t){return e.setState({collaboratorIds:t.target.value.split(",")})},className:"form-control",placeholder:"Collaborator Ids",spellCheck:!1,autoComplete:"off"}),m.a.createElement("div",{className:"mt6 color-9"},m.a.createElement(f.f,{className:"mr3"}),"\u6307\u5b9a\u4e0e\u54ea\u4e9b\u4ed3\u5e93\u5171\u4eab\u63a5\u53e3\uff0c\u4ed3\u5e93 ID \u4e4b\u95f4\u7528\u9017\u53f7\u5206\u9694\uff0c\u4f8b\u5982 ",m.a.createElement("code",null,"1,2,3"),"\u3002")))),m.a.createElement("div",{className:"rmodal-footer"},m.a.createElement("div",{className:"form-group row mb0"},m.a.createElement("label",{className:"col-sm-2 control-label"}),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",style:{marginRight:8}},"\u63d0\u4ea4"),m.a.createElement(b.a,{onClick:function(e){e.preventDefault(),t.close()},variant:"contained"},"\u53d6\u6d88")))))))}},{key:"componentDidUpdate",value:function(){this.context.rmodal.reposition()}}]),t}(i.Component);y.contextTypes={rmodal:d.a.object.isRequired};var N={updateRepository:v.z,addRepository:v.a};t.a=Object(p.c)(function(e){return{auth:e.auth}},N)(y)},271:function(e,t,a){"use strict";var r=a(18),n=a(19),o=a(22),l=a(20),c=a(21),s=a(0),i=a.n(s),m=a(26),u=(a(272),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={curVal:e.curVal},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"handleChange",value:function(e){e.target.value!==this.state.curVal&&(this.setState({curVal:e.target.value}),this.props.onChange&&this.props.onChange(e.target.value))}},{key:"render",value:function(){var e=this,t=this;return i.a.createElement("div",{className:"ctl-radio-list"},this.props.data.map(function(a){return i.a.createElement("label",{className:"label mr8",key:a.value},i.a.createElement("input",{className:"input",type:"radio",name:t.props.name,value:a.value,disabled:t.props.disabled,checked:e.state.curVal+""===a.value+"","data-log":typeof e.state.curVal+"|"+typeof a.value,onChange:function(e){return t.handleChange(e)}}),a.label)}))}}]),t}(s.Component));t.a=Object(m.c)(function(){return{}},{})(u)},272:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},294:function(e,t,a){"use strict";var r=a(18),n=a(19),o=a(22),l=a(20),c=a(21),s=a(61),i=a(0),m=a.n(i),u=a(58),d=a(37),p=a(4),h=a(267),f=a(65),b=a(258),v=a(9),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).handleDeleteRepository=function(e){e.preventDefault();var t=a.props,r=t.repository,n=t.router,o=t.replace,l="\u4ed3\u5e93\u88ab\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u5e76\u4e14\u4f1a\u5220\u9664\u76f8\u5173\u7684\u6a21\u5757\u548c\u63a5\u53e3\uff01\n\u786e\u8ba4\u7ee7\u7eed\u5220\u9664\u300e#".concat(r.id," ").concat(r.name,"\u300f\u5417\uff1f");if(window.confirm(l)){(0,a.props.deleteRepository)(r.id);var c=n.location;o(c.pathname+c.hash+c.search)}},a.handleUpdate=function(){var e=a.props.router.location,t=e.pathname,r=e.hash,n=e.search;a.props.replace(t+n+r)},a.state={update:!1},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.auth,r=t.repository,n=t.editor,o=t.router.location;return m.a.createElement(b.a,{className:"Repository card"},m.a.createElement("div",{className:"card-block"},m.a.createElement("div",{className:"name"},m.a.createElement(f.r,{className:"mr6 color-9"}),m.a.createElement(u.b,{to:"".concat(n,"?id=").concat(r.id)},r.name)),m.a.createElement("div",{className:"desc"},r.description),m.a.createElement("div",{className:"toolbar"},m.a.createElement("a",{href:"".concat(p.c,"/app/plugin/").concat(r.id),target:"_blank",rel:"noopener noreferrer"},m.a.createElement(f.o,null)),r.owner.id===a.id||r.members.find(function(e){return e.id===a.id})?m.a.createElement("span",{className:"fake-link",onClick:function(){return e.setState({update:!0})}},m.a.createElement(f.m,null)):null,m.a.createElement(d.h,{when:this.state.update,onClose:function(){return e.setState({update:!1})},onResolve:this.handleUpdate},m.a.createElement(h.a,{title:"\u7f16\u8f91\u4ed3\u5e93",repository:r})),r.owner.id===a.id?m.a.createElement(u.b,{to:o.pathname+o.search,onClick:this.handleDeleteRepository},m.a.createElement(f.u,null)):null)),m.a.createElement("div",{className:"card-block card-footer"},r.organization?m.a.createElement("span",{className:"ownername"},m.a.createElement(f.k,null)," ",r.organization.name):m.a.createElement("span",{className:"ownername"},m.a.createElement(f.n,null)," ",r.owner.fullname),m.a.createElement("span",{className:"fromnow"},Object(u.l)(r.updatedAt).fromNow(),"\u66f4\u65b0")))}}]),t}(i.Component),y={deleteRepository:v.e,replace:u.o},N=Object(u.j)(function(e){return{auth:e.auth,router:e.router}},y)(E),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.repositories,r=e.editor;return a.length?m.a.createElement("div",{className:"RepositoryList row"},a.map(function(e){return m.a.createElement("div",{key:e.id,className:"col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3"},m.a.createElement(N,{repository:e,editor:r}))})):t?m.a.createElement("div",{className:"fontsize-14 text-center p40"},"\u6ca1\u6709\u627e\u5230\u5339\u914d ",m.a.createElement("strong",null,t)," \u7684\u4ed3\u5e93\u3002"):m.a.createElement("div",{className:"fontsize-14 text-center p40"},"\u6ca1\u6709\u6570\u636e\u3002")}}]),t}(i.Component),j=a(8),O=a.n(j),w=a(26),C=a(271),k=(a(287),a(256)),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(e){a.setState({disableSubmit:!0}),e.preventDefault();var t=a.state,r=t.docUrl,n=t.orgId;a.props.importRepository({docUrl:r,orgId:n},function(e){a.setState({disableSubmit:!1}),e.isOk?a.context.rmodal.resolve():console.log(e.message)})},a.state={orgId:e.orgId,version:1,docUrl:"",disableSubmit:!1},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.context.rmodal,a=this.state.disableSubmit;return m.a.createElement("section",{className:"ImportRepositoryForm"},m.a.createElement("div",{className:"rmodal-header"},m.a.createElement("span",{className:"rmodal-title"},this.props.title)),m.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.a.createElement("div",{className:"rmodal-body"},m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u7248\u672c"),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement(C.a,{data:[{label:"RAP1",value:1}],curVal:this.state.version,name:"version",disabled:!0}))),m.a.createElement("div",null,m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 control-label"},"\u6587\u6863URL"),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement("input",{name:"projectId",value:this.state.docUrl,onChange:function(t){return e.setState({docUrl:t.target.value})},className:"form-control",placeholder:"http://rapapi.org/workspace/myWorkspace.do?projectId=145#2548",spellCheck:!1,autoFocus:!0,required:!0,"data-parsley-maxlength":"256"}))),m.a.createElement("div",{className:"form-group row mb0"},m.a.createElement("label",{className:"col-sm-2 control-label"}),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement(k.a,{type:"submit",id:"btnSubmitImportRAP",disabled:a,variant:"contained",color:"primary",style:{marginRight:8}},a?"\u5bfc\u5165\u4e2d\uff0c\u8bf7\u7a0d\u7b49...":"\u63d0\u4ea4"),m.a.createElement(k.a,{onClick:function(){return t.close()}},"\u53d6\u6d88")))))))}},{key:"componentDidUpdate",value:function(){this.context.rmodal.reposition()}}]),t}(i.Component);R.contextTypes={rmodal:O.a.object.isRequired};var S={importRepository:v.w,fetchRepositoryList:v.s},I=Object(w.c)(null,S)(R),x=a(584),z=a(568),D=a(587);a.d(t,"g",function(){return U}),a.d(t,"a",function(){return V}),a.d(t,"d",function(){return q}),a.d(t,"f",function(){return A}),a.d(t,"e",function(){return F}),a.d(t,"b",function(){return L}),a.d(t,"c",function(){return T});var U={onAddRepository:v.a,onUpdateRepository:v.z,onDeleteRepository:v.e};function V(e){var t=e.organization,a=e.callback,r=Object(i.useState)(!1),n=Object(s.a)(r,2),o=n[0],l=n[1],c=Object(i.useState)(!1),p=Object(s.a)(c,2),b=p[0],v=p[1],E=Object(w.d)(),y=Object(w.e)(function(e){return e.router}),N=function(){if(a)E(Object(u.o)(a));else{var e=Object(u.f)(y);E(Object(u.o)(e.href()))}};return m.a.createElement("span",{className:"float-right ml10"},m.a.createElement(k.a,{className:"RepositoryCreateButton",variant:"contained",color:"primary",onClick:function(){return l(!0)}}," \u65b0\u5efa\u4ed3\u5e93 "),t&&m.a.createElement("button",{className:"RepositoryCreateButton btn btn-secondary ml8",onClick:function(){return v(!0)}},m.a.createElement(f.b,null)," \u5bfc\u5165\u4ed3\u5e93"),m.a.createElement(d.h,{when:o,onClose:function(){return l(!1)},onResolve:N},m.a.createElement(h.a,{title:"\u65b0\u5efa\u4ed3\u5e93",organization:t})),t&&m.a.createElement(d.h,{when:b&&!!t,onClose:function(){return v(!1)},onResolve:N},m.a.createElement(I,{title:"\u5bfc\u5165\u4ed3\u5e93",orgId:t.id})))}function q(e){var t=e.url,a=Object(w.d)();return m.a.createElement(x.a,{className:"mr8",value:t,onChange:function(e){return t=e.target.value,void a(Object(u.m)(t));var t}},m.a.createElement(z.a,{value:"/repository/joined"},"\u6211\u7684\u4ed3\u5e93"),m.a.createElement(z.a,{value:"/repository/all"},"\u6240\u6709\u4ed3\u5e93"))}function A(e){var t=e.name,a=Object(w.d)(),r=Object(w.e)(function(e){return e.router}),n=Object(i.useState)(""),o=Object(s.a)(n,2),l=o[0],c=o[1];return Object(i.useEffect)(function(){c(t)},[t]),m.a.createElement(D.a,{value:l||"",placeholder:"\u641c\u7d22\u4ed3\u5e93\uff1a\u540d\u79f0\u3001ID",autoComplete:"off",onChange:function(e){return c(e.target.value.trim())},onKeyUp:function(e){return 13===e.which&&function(){var e=r.location,t=e.pathname,n=e.hash,o=e.search,c=Object(u.h)(t+n+o).removeSearch("cursor");l?c.setSearch("name",l):c.removeSearch("name"),a(Object(u.m)(c.href()))}()},style:{width:200}})}var F=function(e){var t=e.name,a=e.repositories;return a.fetching?m.a.createElement(d.l,null):m.a.createElement(g,{name:t,repositories:a.data,editor:"/repository/editor"})},L=function(e){var t=e.name,a=e.repositories;return a.fetching?m.a.createElement(d.l,null):m.a.createElement(g,{name:t,repositories:a.data,editor:"/organization/repository/editor"})},T=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.calculated,t=this.context.location;return m.a.createElement(d.d,{location:t,calculated:e})}}]),t}(i.Component);T.contextTypes={location:u.d.object}},570:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a(19),o=a(22),l=a(20),c=a(21),s=a(0),i=a.n(s),m=a(26),u=a(294),d=(a(288),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.match,r=e.repositories;return i.a.createElement("section",{className:"RepositoryListWrapper"},i.a.createElement("nav",{className:"toolbar clearfix"},i.a.createElement(u.d,{url:a.url}),i.a.createElement(u.f,{name:t.params.name})),i.a.createElement("div",{className:"body"},i.a.createElement(u.e,{name:t.params.name,repositories:r})),i.a.createElement("div",{className:"footer"},i.a.createElement(u.c,{calculated:r.pagination})))}}]),t}(s.Component));t.default=Object(m.c)(function(e){return{joiner:e.auth,repositories:e.repositories}},u.g)(d)}}]);
//# sourceMappingURL=10.4cb02f57.chunk.js.map