{"version":3,"sources":["components/repository/RepositoryForm.tsx","components/editor/Importer.tsx","components/editor/RepositorySearcher.tsx","components/editor/ModuleForm.tsx","components/editor/ModuleList.tsx","components/editor/InterfaceForm.tsx","selectors/interface.ts","components/editor/InterfaceList.tsx","components/common/LoadingButton.tsx","components/editor/InterfaceEditorToolbar.tsx","components/editor/InterfaceSummary.tsx","utils/URLUtils.ts","components/editor/PropertyForm.tsx","components/editor/InterfacePreviewer.tsx","components/editor/PropertyList.tsx","components/editor/MoveInterfaceForm.tsx","components/editor/InterfaceEditor.tsx","components/editor/DuplicatedInterfacesWarning.tsx","components/repository/ExportPostmanForm.tsx","components/editor/RepositoryEditor.tsx"],"names":["mockRepository","name","description","members","ownerId","undefined","organizationId","collaboratorIds","RepositoryForm","props","_this","Object","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","rparsley","handleSubmit","e","preventDefault","isValid","_this$props","addRepository","updateRepository","onAddOrUpdateRepository","state","id","organization","repository","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","memberIds","map","user","_this$state","owner","newOwner","rmodal","context","close","resolve","collaborators","item","_this2","auth","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","title","_utils__WEBPACK_IMPORTED_MODULE_10__","ref","onSubmit","value","limit","onChange","users","setState","fullname","target","placeholder","spellCheck","autoComplete","autoFocus","required","data-parsley-trigger","data-parsley-maxlength","rows","join","split","react_icons_go__WEBPACK_IMPORTED_MODULE_11__","_material_ui_core__WEBPACK_IMPORTED_MODULE_12__","type","variant","color","style","marginRight","onClick","reposition","Component","contextTypes","PropTypes","object","isRequired","mapDispatchToProps","connect","mockResult","isPrimitiveType","indexOf","toLowerCase","isIncreamentNumberSequence","numbers","every","num","i","mixItemsProperties","items","length","properties","baseItem","baseProperties","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","p","find","push","_iterator","Symbol","iterator","next","done","err","return","Importer","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_project_workspace_frontend_rap2_dolores_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","$rcm","handleBeautify","result","eval","beautified","JSON","stringify","cm","setValue","handleJSONSchema","schema","parent","arguments","memoryProperties","siblings","mod","itf","scope","hasSiblings","Array","toUpperCase","slice","rule","test","template","valueArr","s","_","uniq","property","assign","descripton","creator","repositoryId","moduleId","interfaceId","parentId","memory","uniqueId","forEach","childSiblings","o","_root_","Mock","toJSONSchema","handleAddMemoryProperties","react__WEBPACK_IMPORTED_MODULE_5___default","_family__WEBPACK_IMPORTED_MODULE_6__","to","_utils___WEBPACK_IMPORTED_MODULE_7__","_material_ui_core__WEBPACK_IMPORTED_MODULE_9__","func","mapStateToProps","onAddProperty","addProperty","Highlight","clip","seed","highlighted","__html","replace","react_default","dangerouslySetInnerHTML","rseed","RegExp","matched","concat","DropdownMenuBase","_this$props2","onSelect","router","uri","StoreStateRouterLocationURI","removeSearch","_DropdownMenu$filter","DropdownMenu","filter","nextRespository","counter","modules","index","key","family","setSearch","href","RepositorySearcher_Highlight","interfaces","method","url","store","respository","objectSpread","nextModule","matchModule","nextInterface","matchInterface","nextProperty","highlight","RepositorySearcher","classCallCheck","possibleConstructorReturn","getPrototypeOf","clearSeed","mockModule","ModuleForm","_this$context","onAddModule","onUpdateModule","onAddOrUpdateModule","creatorId","tabIndex","utils","Button","ModuleBase","handleUpdate","handleDelete","message","window","confirm","onDeleteModule","deleteHref","active","update","selectHref","index_esm","when","onClose","onResolve","editor_ModuleForm","mapDispatchToModuleBaseProps","deleteModule","Module","ModuleList","_this3","handleCreate","_this3$props","handleSort","sortable","onSortModuleList","toArray","create","_this4","_this$props2$reposito","_this$props2$mods","mods","_this$props2$mod","isOwned","isJoined","disabled","data-id","METHODS","STATUS_LIST","mockInterface","InterfaceForm","onAddInterface","onUpdateInterface","lockerId","locker","status","getCurrentInterface","createSelector","itfId","getRouter","location","params","data","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","InterfaceBase","onDeleteInterface","dispatch","curItf","editor_InterfaceForm","Interface","InterfaceList","onSortInterfaceList","_this$props2$itfs","itfs","useStyles","makeStyles","createStyles","root","position","display","buttonProgress","green","top","left","marginTop","marginLeft","LoadingButton","children","label","rest","objectWithoutProperties","classes","loading","CircularProgress","size","theme","button","margin","spacing","leftIcon","rightIcon","iconSmall","fontSize","InterfaceEditorToolbar","editable","handleLockInterface","handleMoveInterface","handleSaveInterface","handleUnlockInterface","useSelector","Save_default","Cancel_default","KeyboardTab_default","Create_default","BODY_OPTION","FORM_DATA","FORM_URLENCODED","RAW","BINARY","REQUEST_PARAMS_TYPE","HEADERS","QUERY_PARAMS","BODY_PARAMS","rptFromStr2Num","rpt","pos","InterfaceSummary","bodyOption","requestParamsType","changeMethod","bind","assertThisInitialized","changeHandler","switchBodyOption","switchRequestParamsType","stateChangeHandler","val","defineProperty","_this$props2$itf","content","onResolved","serve","substring","charAt","rel","role","data-toggle","htmlFor","room","foreign","TYPES","mockProperty","PropertyForm","_this$props$parent","handleAddMemoryProperty","SmartTextarea","instanceOf","RE_KEY","Previewer","remock","currentTarget","firstChild","classList","add","forceUpdate","removeAnimateClass","remove","scopedTemplate","scopedProperties","scopedData","scopedKeys","extraKeys","request","response","Tree","treeToJson","arrayToTree","keys","difference","mock","pick","__root__","Assert","valid","console","warn","v","toString","exec","onAnimationEnd","ex","SortableTreeTableHeader","PropertyLabel","SortableTreeTableRow","handleClickCreateChildPropertyButton","handleDeleteMemoryProperty","handleChangePropertyField","handleSortProperties","group","depth","handle","sort","b","priority","PropertyList_PropertyLabel","checked","SortableTreeTable","_this$props3","PropertyList_SortableTreeTableHeader","PropertyList_SortableTreeTableRow","PropertyList","handleClickCreatePropertyButton","createProperty","createChildProperty","handleClickImporterButton","importer","handleClickPreviewerButton","previewer","handleChangeProperty","handleCreatePropertySucceeded","_this$props4","_this$props4$properti","_this$props4$reposito","_this$props4$mod","_this$props4$itf","_this$props5","ButtonGroup","PropertyList_SortableTreeTable","InterfacePreviewer","editor_PropertyForm","OP_MOVE","OP_COPY","_ref","appBar","flex","preview","form","minWidth","minHeight","formTitle","formItem","marginBottom","ctl","MoveInterfaceForm","modIdInit","_useState","useState","_useState2","slicedToArray","modId","setModId","_useState3","_useState4","op","setOp","useDispatch","useContext","ModalContext","useEffect","repoId","moveInterface","FormControl","Select","fullWidth","x","MenuItem","RadioGroup","String","row","FormControlLabel","control","Radio","RequestPropertyList","components_editor_PropertyList","ResponsePropertyList","InterfaceEditor","cb","summaryState","nextState","toConsumableArray","findIndex","splice","deletedParentIds","updateProperties","moveInterfaceDialogOpen","handleMoveInterfaceSubmit","log","lockInterface","unlockInterface","mapPropsToState","summaryStateChange","childContextTypes","nextProps","updatedAt","prevStates","_this$state$itf","editor_InterfaceEditorToolbar","components_editor_InterfaceSummary","InterfaceEditor_RequestPropertyList","InterfaceEditor_ResponsePropertyList","prevProps","fetchRepository","DuplicatedInterfacesWarning","duplicated","parseDuplicatedInterfaces","groupEnd","ExportPostmanForm","onAddRepository","onUpdateRepository","config","RepositoryEditor","_this$props$router$lo","pathname","hash","search","exportPostman","onFetchRepository","fetching","document","ownerlink","repository_ExportPostmanForm","editor_RepositorySearcher","editor_DuplicatedInterfacesWarning","editor_ModuleList","components_editor_InterfaceList","editor_InterfaceEditor","onLockInterface","onUnlockInterface","onUpdateProperty","onUpdateProperties","onDeleteProperty","onSortPropertyList","onClearRepository","clearRepository","addModule","updateModule","sortModuleList","addInterface","updateInterface","deleteInterface","sortInterfaceList","updateProperty","deleteProperty","sortPropertyList"],"mappings":"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","file":"static/js/7.3614b9c7.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { mock } from 'mockjs'\r\nimport { SmartTextarea, MembersInput, RParsley } from '../utils'\r\nimport { GoInfo } from 'react-icons/go'\r\nimport { RootState } from 'actions/types'\r\nimport { Button } from '@material-ui/core'\r\nimport { updateRepository, addRepository } from 'actions/repository'\r\n\r\n// 模拟数据\r\n// DONE 2.1 各种表单的初始值混乱，待重构\r\nconst mockRepository = process.env.NODE_ENV === 'development'\r\n  ? () => mock({\r\n    name: '仓库@CTITLE(6)',\r\n    description: '@CPARAGRAPH',\r\n    members: [],\r\n    ownerId: undefined,\r\n    organizationId: undefined,\r\n    collaboratorIds: [],\r\n  })\r\n  : () => ({\r\n    name: '',\r\n    description: '',\r\n    members: [],\r\n    ownerId: undefined,\r\n    organizationId: undefined,\r\n    collaboratorIds: [],\r\n  })\r\n\r\nclass RepositoryForm extends Component<any, any> {\r\n  static contextTypes = {\r\n    rmodal: PropTypes.object.isRequired,\r\n  }\r\n  static propTypes = {\r\n    auth: PropTypes.object.isRequired,\r\n    organization: PropTypes.object,\r\n    repository: PropTypes.object,\r\n  }\r\n  rparsley: any\r\n  constructor(props: any) {\r\n    super(props)\r\n    const { repository } = props\r\n    this.state = repository ? {\r\n      ...repository,\r\n      collaboratorIds: repository.collaborators.map((item: any) => item.id),\r\n      newOwner: repository.owner,\r\n    } : mockRepository()\r\n  }\r\n  render() {\r\n    const { rmodal } = this.context\r\n    const { auth } = this.props\r\n    return (\r\n      <section className=\"RepositoryForm\">\r\n        <div className=\"rmodal-header\">\r\n          <span className=\"rmodal-title\">{this.props.title}</span>\r\n        </div>\r\n        <RParsley ref={rparsley => { this.rparsley = rparsley }}>\r\n          <form className=\"form-horizontal\" onSubmit={this.handleSubmit} >\r\n            <div className=\"rmodal-body\">\r\n              {this.state.id &&\r\n                <div className=\"form-group row\">\r\n                  <label className=\"col-sm-2 control-label\">拥有者：</label>\r\n                  <div className=\"col-sm-10\">\r\n                    {this.state.owner && (this.state.owner.id === auth.id)\r\n                      ? <MembersInput\r\n                        value={this.state.newOwner ? [this.state.newOwner] : []}\r\n                        limit={1}\r\n                        onChange={(users: any) => this.setState({ newOwner: users[0] })}\r\n                      />\r\n                      : <div className=\"pt7 pl9\">{this.state.owner.fullname}</div>\r\n                    }\r\n                  </div>\r\n                </div>\r\n              }\r\n              {/* <div className='form-group row'>\r\n                <label className='col-sm-2 control-label'>权限</label>\r\n                <div className='col-sm-10'>\r\n                  <RadioList data={FORM.RADIO_LIST_DATA_VISIBILITY} curVal={this.state.visibility} name='visibility'\r\n                    onChange={visibility => this.setState({ visibility })} />\r\n                </div>\r\n              </div> */}\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 control-label\">名称：</label>\r\n                <div className=\"col-sm-10\">\r\n                  <input\r\n                    name=\"name\"\r\n                    value={this.state.name}\r\n                    onChange={e => this.setState({ name: e.target.value })}\r\n                    className=\"form-control\"\r\n                    placeholder=\"Name\"\r\n                    spellCheck={false}\r\n                    autoComplete=\"off\"\r\n                    autoFocus={true}\r\n                    required={true}\r\n                    data-parsley-trigger=\"change keyup\"\r\n                    data-parsley-maxlength=\"256\"\r\n                  />{/* w280 */}\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 control-label\">简介：</label>\r\n                <div className=\"col-sm-10\">\r\n                  <SmartTextarea\r\n                    name=\"description\"\r\n                    value={this.state.description}\r\n                    onChange={(e: any) => this.setState({ description: e.target.value })}\r\n                    className=\"form-control\"\r\n                    placeholder=\"Description\"\r\n                    spellCheck={false}\r\n                    rows=\"5\"\r\n                    data-parsley-trigger=\"change keyup\"\r\n                    data-parsley-maxlength=\"1024\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 control-label\">成员：</label>\r\n                <div className=\"col-sm-10\">\r\n                  <MembersInput value={this.state.members} onChange={(members: any) => this.setState({ members })} />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group row\">\r\n                {/* DONE 2.1 帮助信息：仓库 ID 用逗号分隔，例如 1,2,3 */}\r\n                <label className=\"col-sm-2 control-label\">协同仓库：</label>\r\n                <div className=\"col-sm-10\">\r\n                  {/* TODO 2.2 CollaboratorsInput */}\r\n                  <input\r\n                    name=\"name\"\r\n                    value={this.state.collaboratorIds.join(',')}\r\n                    onChange={e => this.setState({ collaboratorIds: e.target.value.split(',') })}\r\n                    className=\"form-control\"\r\n                    placeholder=\"Collaborator Ids\"\r\n                    spellCheck={false}\r\n                    autoComplete=\"off\"\r\n                  />\r\n                  <div className=\"mt6 color-9\">\r\n                    <GoInfo className=\"mr3\" />\r\n                    指定与哪些仓库共享接口，仓库 ID 之间用逗号分隔，例如 <code>1,2,3</code>。</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"rmodal-footer\">\r\n              <div className=\"form-group row mb0\">\r\n                <label className=\"col-sm-2 control-label\" />\r\n                <div className=\"col-sm-10\">\r\n                  <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{ marginRight: 8 }}>提交</Button>\r\n                  <Button onClick={e => { e.preventDefault(); rmodal.close() }} variant=\"contained\">取消</Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </RParsley>\r\n      </section>\r\n    )\r\n  }\r\n  componentDidUpdate() {\r\n    this.context.rmodal.reposition()\r\n  }\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n    if (!this.rparsley.isValid()) { return }\r\n    const { addRepository, updateRepository } = this.props\r\n    const onAddOrUpdateRepository = this.state.id ? updateRepository : addRepository\r\n    const { organization } = this.props\r\n    const repository: any = {\r\n      ...this.state,\r\n      organizationId: organization ? organization.id : null,\r\n      memberIds: (this.state.members || []).map((user: any) => user.id),\r\n    }\r\n    const { owner, newOwner } = this.state\r\n    if (newOwner && newOwner.id !== owner.id) { repository.ownerId = newOwner.id }\r\n    const { rmodal } = this.context\r\n    rmodal.close()\r\n    onAddOrUpdateRepository(repository, () => {\r\n      if (rmodal) { rmodal.resolve() }\r\n    })\r\n  }\r\n}\r\n\r\n// 容器组件\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n})\r\nconst mapDispatchToProps = ({\r\n  updateRepository,\r\n  addRepository,\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(RepositoryForm)\r\n","import React, { Component } from 'react'\r\nimport { connect, Link, Mock, _, PropTypes } from '../../family'\r\nimport { RCodeMirror } from '../utils/'\r\nimport { addProperty } from '../../actions/property'\r\nimport { RootState } from 'actions/types'\r\nimport { Button } from '@material-ui/core'\r\nconst mockResult =\r\n  process.env.NODE_ENV === 'development'\r\n    ? () => ({\r\n      foo: {\r\n        bar: {\r\n          faz: {},\r\n        },\r\n      },\r\n    })\r\n    : () => ({})\r\nfunction isPrimitiveType(type: string) {\r\n  return ['number', 'null', 'undefined', 'boolean', 'string'].indexOf(type.toLowerCase()) > -1\r\n}\r\nconst isIncreamentNumberSequence = (numbers: any) =>\r\n  numbers.every((num: any) => typeof num === 'number' && ((num: any, i: number) => i === 0 || num - numbers[i - 1] === 1))\r\nfunction mixItemsProperties(items: any) {\r\n  // 合并 item properties 的 key，返回的 item 拥有导入 json 的所有 key\r\n  if (!items || !items.length) {\r\n    return {\r\n      properties: [],\r\n    }\r\n  } else if (items.length === 1) {\r\n    if (!items[0].properties) {\r\n      items[0].properties = []\r\n    }\r\n    return items[0]\r\n  } else {\r\n    const baseItem = items[0]\r\n    if (!baseItem.properties) {\r\n      baseItem.properties = []\r\n    }\r\n    const baseProperties = baseItem.properties\r\n    for (let i = 1; i < items.length; ++i) {\r\n      const item = items[i]\r\n      if (item.properties && item.properties.length) {\r\n        for (const p of item.properties) {\r\n          if (!baseProperties.find((e: any) => e.name === p.name)) {\r\n            baseProperties.push(p)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return baseItem\r\n  }\r\n}\r\ntype ImporterProps = {\r\n  rmodal?: any,\r\n  title?: any,\r\n  handleAddMemoryProperties: (...args: any[]) => any,\r\n  [k: string]: any;\r\n}\r\ntype ImporterState = {\r\n  result: string\r\n}\r\nclass Importer extends Component<ImporterProps, ImporterState> {\r\n  static contextTypes = {\r\n    rmodal: PropTypes.object.isRequired,\r\n    handleAddMemoryProperties: PropTypes.func.isRequired,\r\n  }\r\n  $rcm: any\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = {\r\n      result: JSON.stringify(mockResult(), null, 2),\r\n    }\r\n  }\r\n  render() {\r\n    const { rmodal } = this.context\r\n    return (\r\n      <section className=\"Importer\">\r\n        <div className=\"rmodal-header\">\r\n          <span className=\"rmodal-title\">{this.props.title}</span>\r\n          <Link to=\"\" onClick={e => this.handleBeautify(e)}>\r\n            格式化\r\n          </Link>\r\n        </div>\r\n        <form className=\"form-horizontal w600\" onSubmit={this.handleSubmit}>\r\n          <div className=\"rmodal-body\">\r\n            <div className=\"form-group\">\r\n              <RCodeMirror\r\n                value={this.state.result}\r\n                onChange={(value: any) => this.setState({ result: value })}\r\n                ref={$rcm => {\r\n                  this.$rcm = $rcm\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"rmodal-footer\">\r\n            <div className=\"form-group mb0\">\r\n              <Button type=\"submit\" style={{ marginRight: 8 }} variant=\"contained\" color=\"primary\">\r\n                提交\r\n              </Button>\r\n              <Button onClick={() => rmodal.close()} > 取消 </Button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    )\r\n  }\r\n  componentDidUpdate() {\r\n    this.context.rmodal.reposition()\r\n  }\r\n  // DONE 2.1 支持格式化\r\n  handleBeautify = (e: any) => {\r\n    e.preventDefault()\r\n    if (this.$rcm) {\r\n      const result = eval('(' + this.state.result + ')') // eslint-disable-line no-eval\r\n      const beautified = JSON.stringify(result, null, 2)\r\n      this.$rcm.cm.setValue(beautified)\r\n    }\r\n  };\r\n  // TODO 2.1 待完整测试各种输入\r\n  // DONE 2.1 BUG 类型 Number，初始值 ''，被解析为随机字符串\r\n  handleJSONSchema = (schema: any, parent = { id: -1 }, memoryProperties: any, siblings?: any) => {\r\n    if (!schema) { return }\r\n    const { auth, repository, mod, itf, scope } = this.props\r\n    const hasSiblings = siblings instanceof Array && siblings.length > 0\r\n    // DONE 2.1 需要与 Mock 的 rule.type 规则统一，首字符小写，好烦！应该忽略大小写！\r\n    let type = schema.type[0].toUpperCase() + schema.type.slice(1)\r\n    let rule = ''\r\n    if (type === 'Array' && schema.items && schema.items.length > 1) {\r\n      rule = schema.items.length\r\n    }\r\n    let value = /Array|Object/.test(type) ? '' : schema.template\r\n    if (schema.items && schema.items.length) {\r\n      const childType = schema.items[0].type\r\n      if (isPrimitiveType(childType)) {\r\n        value = JSON.stringify(schema.template)\r\n        rule = ''\r\n      }\r\n    } else if (hasSiblings && isPrimitiveType(type)) {\r\n      // 如果是简单数据可以在这里进行合并\r\n      const valueArr = siblings.map((s: any) => s && s.template)\r\n      if (_.uniq(valueArr).length > 1) {\r\n        // 只有在数组里有不同元素时再合并\r\n        if (isIncreamentNumberSequence(valueArr)) {\r\n          // 如果是递增数字序列特殊处理\r\n          value = valueArr[0]\r\n          rule = '+1'\r\n        } else {\r\n          // 比如 [{a:1},{a:2}]\r\n          // 我们可以用 type: Array rule: +1 value: [1,2] 进行还原\r\n          value = JSON.stringify(valueArr)\r\n          type = 'Array'\r\n          rule = '+1'\r\n        }\r\n      }\r\n    }\r\n\r\n    type Property = {\r\n        name: any;\r\n        type: any;\r\n        rule: string;\r\n        value: any;\r\n        descripton: string;\r\n        creator: any;\r\n        repositoryId: any;\r\n        moduleId: any;\r\n        interfaceId: any;\r\n        scope: any;\r\n        parentId: number;\r\n        memory: boolean;\r\n        id: any;\r\n    }\r\n    const property: Property = Object.assign(\r\n      {\r\n        name: schema.name,\r\n        type,\r\n        rule,\r\n        value,\r\n        descripton: '',\r\n      },\r\n      {\r\n        creator: auth.id,\r\n        repositoryId: repository.id,\r\n        moduleId: mod.id,\r\n        interfaceId: itf.id,\r\n        scope,\r\n        parentId: parent.id,\r\n      },\r\n      {\r\n        memory: true,\r\n        id: _.uniqueId('memory-'),\r\n      }\r\n    )\r\n    memoryProperties.push(property)\r\n    if (schema.properties) {\r\n      schema.properties.forEach((item: any) => {\r\n        const childSiblings = hasSiblings ? siblings.map((s: any) => s && (s.properties.find((p: any) => p.name === item.name) || null)) : undefined\r\n        this.handleJSONSchema(item, property, memoryProperties, childSiblings)\r\n      })\r\n    }\r\n    mixItemsProperties(schema.items).properties.forEach((item: any) => {\r\n      const siblings = schema.items.map((o: any) => o.properties.find((p: any) => p.name === item.name) || null)\r\n      this.handleJSONSchema(item, property, memoryProperties, siblings)\r\n    })\r\n  };\r\n  // DONE 2.1 因为 setState() 是异步的，导致重复调用 handleAddMemoryProperty() 时最后保留最后一个临时属性\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n    let result = eval('(' + this.state.result + ')') // eslint-disable-line no-eval\r\n    if (result instanceof Array) {\r\n      result = { _root_: result }\r\n    }\r\n    const schema = Mock.toJSONSchema(result)\r\n    const memoryProperties: any = []\r\n    if (schema.properties) { schema.properties.forEach((item: any) => this.handleJSONSchema(item, undefined, memoryProperties)) }\r\n    const { handleAddMemoryProperties } = this.context\r\n    handleAddMemoryProperties(memoryProperties, () => {\r\n      // done\r\n      const { rmodal } = this.context\r\n      if (rmodal) { rmodal.resolve() }\r\n    })\r\n  };\r\n}\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n})\r\nconst mapDispatchToProps = {\r\n  onAddProperty: addProperty,\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Importer)\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, Link, StoreStateRouterLocationURI, connect } from '../../family'\r\n\r\nclass Highlight extends Component<any, any> {\r\n  static replace = (clip: any, seed: any) => {\r\n    if (!seed) { return clip }\r\n    const rseed = new RegExp(seed, 'ig')\r\n    return ('' + clip).replace(rseed, (matched) =>\r\n      `<span class='highlight'>${matched}</span>`\r\n    )\r\n  }\r\n  render() {\r\n    const { clip, seed } = this.props\r\n    const highlighted = { __html: Highlight.replace(clip, seed) }\r\n    return (\r\n      <span {...this.props} dangerouslySetInnerHTML={highlighted} />\r\n    )\r\n  }\r\n}\r\n\r\nclass DropdownMenuBase extends Component<any, any> {\r\n  static contextTypes = {\r\n    store: PropTypes.object,\r\n  }\r\n  static filter = (respository: any, seed: any) => {\r\n    const nextRespository = { ...respository, modules: [] }\r\n    let counter = 0\r\n    respository.modules.forEach((mod: any) => {\r\n      const nextModule = { ...mod, interfaces: [] }\r\n      let matchModule = nextModule.name.indexOf(seed) !== -1\r\n      if (matchModule) {\r\n        counter++\r\n        nextRespository.modules.push(nextModule)\r\n      }\r\n\r\n      mod.interfaces.forEach((itf: any) => {\r\n        const nextInterface = { ...itf, properties: [] }\r\n        let matchInterface = nextInterface.name.indexOf(seed) !== -1 || nextInterface.url.indexOf(seed) !== -1 || nextInterface.method === seed\r\n        if (matchInterface) {\r\n          counter++\r\n          if (!matchModule) {\r\n            matchModule = true\r\n            nextRespository.modules.push(nextModule)\r\n          }\r\n          nextModule.interfaces.push(nextInterface)\r\n        }\r\n\r\n        itf.properties.forEach((property: any) => {\r\n          const nextProperty = { ...property }\r\n          const matchProperty = nextProperty.name.indexOf(seed) !== -1\r\n          if (matchProperty) {\r\n            counter++\r\n            if (!matchModule) {\r\n              matchModule = true\r\n              nextRespository.modules.push(nextModule)\r\n            }\r\n            if (!matchInterface) {\r\n              matchInterface = true\r\n              nextModule.interfaces.push(nextInterface)\r\n            }\r\n            nextInterface.properties.push(nextProperty)\r\n          }\r\n        })\r\n      })\r\n    })\r\n    return { nextRespository, counter }\r\n  }\r\n  static highlight = (clip: any, seed: any) => {\r\n    if (!seed) { return clip }\r\n    const rseed = new RegExp(seed, 'ig')\r\n    return ('' + clip).replace(rseed, (matched) =>\r\n      `<span class='highlight'>${matched}</span>`\r\n    )\r\n  }\r\n  render() {\r\n    const { repository, seed, onSelect, router } = this.props\r\n    const uri = StoreStateRouterLocationURI(router).removeSearch('mod').removeSearch('itf')\r\n    const { nextRespository, counter } = DropdownMenu.filter(repository, seed)\r\n    if (counter === 0) { return null }\r\n    return (\r\n      <div className=\"dropdown-menu\">\r\n        {nextRespository.modules.map((mod: any, index: any, modules: any) =>\r\n          <div key={`mod-${mod.id}`}>\r\n            <Link to={uri.setSearch({ mod: mod.id }).href()} onClick={onSelect} className=\"dropdown-item dropdown-item-module\">\r\n              <span className=\"label\">模块</span>\r\n              <Highlight className=\"dropdown-item-clip\" clip={mod.name} seed={seed} />\r\n            </Link>\r\n            {mod.interfaces.map((itf: any) =>\r\n              <div key={`itf-${itf.id}`} >\r\n                <Link\r\n                  to={uri.setSearch({ mod: itf.moduleId }).setSearch({ itf: itf.id }).href()}\r\n                  onClick={onSelect}\r\n                  className=\"dropdown-item dropdown-item-interface\"\r\n                >\r\n                  <span className=\"label\">接口</span>\r\n                  <Highlight className=\"dropdown-item-clip\" clip={itf.name} seed={seed} />\r\n                  <Highlight className=\"dropdown-item-clip\" clip={itf.method} seed={seed} />\r\n                  <Highlight className=\"dropdown-item-clip\" clip={itf.url} seed={seed} />\r\n                </Link>\r\n                {itf.properties.map((property: any) =>\r\n                  <Link key={`property-${property.id}`} to={uri.setSearch({ mod: property.moduleId }).setSearch({ itf: property.interfaceId }).href()} onClick={onSelect} className=\"dropdown-item dropdown-item-property\">\r\n                    <span className=\"label\">属性</span>\r\n                    <Highlight className=\"dropdown-item-clip\" clip={property.name} seed={seed} />\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            )}\r\n            {index < modules.length - 1 && <div className=\"dropdown-divider\" />}\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst DropdownMenu = connect((state: any) => ({ router: state.router }))(DropdownMenuBase)\r\n\r\n// TODO 2.2 自动隐藏，高阶组件\r\nclass RepositorySearcher extends Component<any, any> {\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = { seed: '' }\r\n  }\r\n  render() {\r\n    const { repository } = this.props\r\n    return (\r\n      <div className=\"RepositorySearcher dropdown\">\r\n        <input\r\n          value={this.state.seed}\r\n          onChange={e => { this.setState({ seed: e.target.value }) }}\r\n          className=\"dropdown-input form-control\"\r\n          placeholder=\"工作区搜索\"\r\n        />\r\n        {this.state.seed && <DropdownMenu repository={repository} seed={this.state.seed} onSelect={this.clearSeed} />}\r\n      </div>\r\n    )\r\n  }\r\n  clearSeed = () => {\r\n    this.setState({ seed: '' })\r\n  }\r\n}\r\n\r\nexport default connect((state: any) => ({\r\n  router: state.router,\r\n}))(RepositorySearcher)\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, connect, Mock } from '../../family'\r\nimport { SmartTextarea } from '../utils'\r\nimport { RootState } from 'actions/types'\r\nimport { Button } from '@material-ui/core'\r\n// 模拟数据\r\nconst mockModule = process.env.NODE_ENV === 'development'\r\n  ? () => Mock.mock({\r\n    name: '模块@CTITLE(4)',\r\n    description: '@CPARAGRAPH',\r\n    repositoryId: undefined,\r\n  })\r\n  : () => ({\r\n    name: '',\r\n    description: '',\r\n    repositoryId: undefined,\r\n  })\r\n\r\n// 展示组件\r\nclass ModuleForm extends Component<any, any> {\r\n  static contextTypes = {\r\n    rmodal: PropTypes.object.isRequired,\r\n    onAddModule: PropTypes.func.isRequired,\r\n    onUpdateModule: PropTypes.func.isRequired,\r\n  }\r\n  static propTypes = {\r\n    auth: PropTypes.object.isRequired,\r\n    repository: PropTypes.object.isRequired,\r\n    mod: PropTypes.object,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    const { mod } = this.props\r\n    this.state = mod ? { ...mod } : mockModule()\r\n  }\r\n  render() {\r\n    const { rmodal } = this.context\r\n    return (\r\n      <section>\r\n        <div className=\"rmodal-header\">\r\n          <span className=\"rmodal-title\">{this.props.title}</span>\r\n        </div>\r\n        <form className=\"form-horizontal w600\" onSubmit={this.handleSubmit}>\r\n          <div className=\"rmodal-body\">\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">名称：</label>\r\n              <div className=\"col-sm-10\">\r\n                <input\r\n                  name=\"name\"\r\n                  tabIndex={1}\r\n                  value={this.state.name}\r\n                  onChange={e => this.setState({ name: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Name\"\r\n                  spellCheck={false}\r\n                  autoFocus={true}\r\n                  required={true}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">简介：</label>\r\n              <div className=\"col-sm-10\">\r\n                <SmartTextarea\r\n                  tabIndex={2}\r\n                  name=\"description\"\r\n                  value={this.state.description}\r\n                  onChange={(e: any) => this.setState({ description: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Description\"\r\n                  spellCheck={false}\r\n                  rows=\"5\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"rmodal-footer\">\r\n            <div className=\"form-group row mb0\">\r\n              <label className=\"col-sm-2 control-label\" />\r\n              <div className=\"col-sm-10\">\r\n                <Button type=\"submit\" style={{ marginRight: 8 }} variant=\"contained\" color=\"primary\">提交</Button>\r\n                <Button onClick={() => rmodal.close()} >取消</Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    )\r\n  }\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n    const { onAddModule, onUpdateModule } = this.context\r\n    const { auth, repository } = this.props\r\n    const onAddOrUpdateModule = this.state.id ? onUpdateModule : onAddModule\r\n    const mod = Object.assign({}, this.state, {\r\n      creatorId: auth.id,\r\n      repositoryId: repository.id,\r\n    })\r\n    const { rmodal } = this.context\r\n    rmodal.close()\r\n    onAddOrUpdateModule(mod, () => {\r\n      if (rmodal) { rmodal.resolve() }\r\n    })\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n})\r\nconst mapDispatchToProps = ({})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ModuleForm)\r\n","import React, { Component } from 'react'\r\nimport { connect, Link, replace, StoreStateRouterLocationURI } from '../../family'\r\nimport { RModal, RSortable } from '../utils'\r\nimport ModuleForm from './ModuleForm'\r\nimport { GoPencil, GoTrashcan, GoPackage } from 'react-icons/go'\r\nimport { RootState } from 'actions/types'\r\nimport { deleteModule } from '../../actions/module'\r\n\r\nclass ModuleBase extends Component<any, any> {\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = { update: false }\r\n  }\r\n  render() {\r\n    const { auth, repository, mod, router } = this.props\r\n    const uri = StoreStateRouterLocationURI(router).removeSearch('itf')\r\n    const selectHref = uri.setSearch('mod', mod.id).href()\r\n    return (\r\n      <div className=\"Module clearfix\">\r\n        <Link to={selectHref} className=\"name\">{mod.name}</Link>\r\n        <div className=\"toolbar\">\r\n          {/* 编辑权限：拥有者或者成员 */}\r\n          {repository.owner.id === auth.id || repository.members.find((item: any) => item.id === auth.id)\r\n            ? <span className=\"fake-link\" onClick={() => this.setState({ update: true })}><GoPencil /></span>\r\n            : null\r\n          }\r\n          {repository.owner.id === auth.id || repository.members.find((item: any) => item.id === auth.id)\r\n            ? <span className=\"fake-link\" onClick={e => this.handleDelete(e, mod)}><GoTrashcan /></span>\r\n            : null\r\n          }\r\n        </div>\r\n        <RModal when={this.state.update} onClose={() => this.setState({ update: false })} onResolve={this.handleUpdate}>\r\n          <ModuleForm title=\"修改模块\" mod={mod} repository={repository} />\r\n        </RModal>\r\n      </div>\r\n    )\r\n  }\r\n  handleUpdate = () => {\r\n    this.props.replace(StoreStateRouterLocationURI(this.props.router).href())\r\n  }\r\n  handleDelete = (e: any, mod: any) => {\r\n    const { router } = this.props\r\n    e.preventDefault()\r\n    const message = `模块被删除后不可恢复，并且会删除相关的接口！\\n确认继续删除『#${mod.id} ${mod.name}』吗？`\r\n    if (window.confirm(message)) {\r\n      this.props.onDeleteModule(this.props.mod.id, () => {\r\n        const uri = StoreStateRouterLocationURI(router)\r\n        const deleteHref = this.props.active ? uri.removeSearch('mod').href() : uri.href()\r\n        this.props.replace(deleteHref)\r\n      }, this.props.repository.id)\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToModuleBaseProps = (state: any) => ({\r\n  router: state.router,\r\n})\r\nconst mapDispatchToModuleBaseProps = ({\r\n  onDeleteModule: deleteModule,\r\n  replace,\r\n})\r\n\r\nconst Module = connect(mapStateToModuleBaseProps, mapDispatchToModuleBaseProps)(ModuleBase)\r\n\r\nclass ModuleList extends Component<any, any> {\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = { create: false }\r\n  }\r\n  render() {\r\n    const { auth, repository = {}, mods = [], mod = {} } = this.props\r\n    const isOwned = repository.owner.id === auth.id\r\n    const isJoined = repository.members.find((item: any) => item.id === auth.id)\r\n    return (\r\n      <RSortable onChange={this.handleSort} disabled={!isOwned && !isJoined}>\r\n        <ul className=\"ModuleList clearfix\">\r\n          {mods.map((item: any) =>\r\n            <li key={item.id} className={item.id === mod.id ? 'active sortable' : 'sortable'} data-id={item.id}>\r\n              <Module key={item.id} mod={item} active={item.id === mod.id} repository={repository} auth={auth} />\r\n            </li>\r\n          )}\r\n          {/* 编辑权限：拥有者或者成员 */}\r\n          {isOwned || isJoined\r\n            ? <li>\r\n              <span className=\"fake-link\" onClick={() => this.setState({ create: true })}>\r\n                <GoPackage className=\"fontsize-14\" /> 新建模块\r\n              </span>\r\n              <RModal when={this.state.create} onClose={() => this.setState({ create: false })} onResolve={this.handleCreate}>\r\n                <ModuleForm title=\"新建模块\" repository={repository} />\r\n              </RModal>\r\n            </li>\r\n            : null\r\n          }\r\n        </ul>\r\n      </RSortable>\r\n    )\r\n  }\r\n  handleCreate = () => {\r\n    const { router, replace } = this.props\r\n    replace(StoreStateRouterLocationURI(router).href())\r\n  }\r\n  handleSort = (_: any, sortable: any) => {\r\n    const { onSortModuleList } = this.context\r\n    onSortModuleList(sortable.toArray())\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n  router: state.router,\r\n})\r\nconst mapDispatchToProps = ({\r\n  replace,\r\n})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ModuleList)\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, connect, Mock } from '../../family'\r\nimport { SmartTextarea } from '../utils'\r\nimport { RootState } from 'actions/types'\r\nimport { Button } from '@material-ui/core'\r\nexport const METHODS = ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS', 'PATCH', 'HEAD']\r\nexport const STATUS_LIST = [200, 301, 403, 404, 500, 502, 503, 504]\r\n// 模拟数据\r\nconst mockInterface =\r\n  process.env.NODE_ENV === 'development'\r\n    ? () =>\r\n      Mock.mock({\r\n        name: '接口@CTITLE(4)',\r\n        url: '@URL',\r\n        'method|1': METHODS,\r\n        description: '@CPARAGRAPH',\r\n        repositoryId: undefined,\r\n        moduleId: undefined,\r\n      })\r\n    : () => ({\r\n      name: '',\r\n      url: '',\r\n      method: 'GET',\r\n      description: '',\r\n      repositoryId: undefined,\r\n      moduleId: undefined,\r\n    })\r\n\r\ntype InterfaceFormProps = any\r\ntype InterfaceFormState = any\r\nclass InterfaceForm extends Component<InterfaceFormProps, InterfaceFormState> {\r\n  static contextTypes = {\r\n    rmodal: PropTypes.object.isRequired,\r\n    onAddInterface: PropTypes.func.isRequired,\r\n    onUpdateInterface: PropTypes.func.isRequired,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    const itf = this.props.itf\r\n    this.state = itf ? { ...itf } : mockInterface()\r\n  }\r\n  render() {\r\n    const { rmodal } = this.context\r\n    return (\r\n      <section>\r\n        <div className=\"rmodal-header\">\r\n          <span className=\"rmodal-title\">{this.props.title}</span>\r\n        </div>\r\n        <form className=\"form-horizontal w600\" onSubmit={this.handleSubmit}>\r\n          <div className=\"rmodal-body\">\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">名称：</label>\r\n              <div className=\"col-sm-10\">\r\n                <input\r\n                  name=\"name\"\r\n                  tabIndex={1}\r\n                  value={this.state.name}\r\n                  onChange={e => this.setState({ name: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Name\"\r\n                  spellCheck={false}\r\n                  autoFocus={true}\r\n                  required={true}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">地址：</label>\r\n              <div className=\"col-sm-10\">\r\n                <input\r\n                  name=\"name\"\r\n                  tabIndex={2}\r\n                  value={this.state.url}\r\n                  onChange={e => this.setState({ url: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"URI\"\r\n                  spellCheck={false}\r\n                  required={true}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">类型：</label>\r\n              <div className=\"col-sm-10\">\r\n                <select\r\n                  name=\"method\"\r\n                  tabIndex={3}\r\n                  value={this.state.method}\r\n                  onChange={e => this.setState({ method: e.target.value })}\r\n                  className=\"form-control\"\r\n                >\r\n                  {METHODS.map(method => (\r\n                    <option key={method} value={method}>\r\n                      {method}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">状态码：</label>\r\n              <div className=\"col-sm-10\">\r\n                <select\r\n                  name=\"status\"\r\n                  tabIndex={4}\r\n                  value={this.state.status}\r\n                  onChange={e => this.setState({ status: e.target.value })}\r\n                  className=\"form-control\"\r\n                >\r\n                  {STATUS_LIST.map(status => (\r\n                    <option key={status} value={status}>\r\n                      {status}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">简介：</label>\r\n              <div className=\"col-sm-10\">\r\n                <SmartTextarea\r\n                  name=\"description\"\r\n                  tabIndex={5}\r\n                  value={this.state.description}\r\n                  onChange={(e: any) => this.setState({ description: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Description\"\r\n                  spellCheck={false}\r\n                  rows=\"5\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"rmodal-footer\">\r\n            <div className=\"form-group row mb0\">\r\n              <label className=\"col-sm-2 control-label\" />\r\n              <div className=\"col-sm-10\">\r\n                <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{marginRight: 8}}>\r\n                  提交\r\n                </Button>\r\n                <Button onClick={() => rmodal.close()} > 取消 </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    )\r\n  }\r\n  componentDidUpdate() {\r\n    this.context.rmodal.reposition()\r\n  }\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n    const { onAddInterface, onUpdateInterface } = this.context\r\n    const { auth, repository, mod } = this.props\r\n    const onAddOrUpdateInterface = this.state.id ? onUpdateInterface : onAddInterface\r\n    const itf = Object.assign({}, this.state, {\r\n      creatorId: auth.id,\r\n      repositoryId: repository.id,\r\n      moduleId: mod.id,\r\n      lockerId: this.state.locker ? this.state.locker.id : null,\r\n    })\r\n    onAddOrUpdateInterface(itf, () => {\r\n      const { rmodal } = this.context\r\n      if (rmodal) { rmodal.resolve() }\r\n    })\r\n  };\r\n}\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n})\r\nconst mapDispatchToProps = {}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InterfaceForm)\r\n","import {\r\n  createSelector\r\n} from 'reselect'\r\nimport {\r\n  getRouter\r\n} from './router'\r\nimport { RootState } from 'actions/types'\r\n\r\nconst interfaceSelector = (state: RootState) => {\r\n  const router = getRouter(state)\r\n  const itfId = +(router.location as any).params.itf\r\n  if (itfId > 0) {\r\n    for (const mod of state.repository.data.modules) {\r\n      for (const itf of mod.interfaces) {\r\n        if (itf.id === itfId) {\r\n          return itf\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nexport const getCurrentInterface = createSelector(\r\n  interfaceSelector,\r\n  result => result\r\n)\r\n","import React, { Component } from 'react'\r\nimport { connect, Link, replace, StoreStateRouterLocationURI } from '../../family'\r\nimport { RModal, RSortable } from '../utils'\r\nimport InterfaceForm from './InterfaceForm'\r\nimport { GoPencil, GoTrashcan, GoRocket, GoLock } from 'react-icons/go'\r\nimport { getCurrentInterface } from '../../selectors/interface'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './InterfaceList.css'\r\nimport { RootState } from 'actions/types'\r\ntype InterfaceProps = any\r\ntype InterfaceState = any\r\nclass InterfaceBase extends Component<InterfaceProps, InterfaceState> {\r\n  static contextTypes = {\r\n    store: PropTypes.object,\r\n    onDeleteInterface: PropTypes.func.isRequired,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = { update: false }\r\n  }\r\n  render() {\r\n    const { auth, repository, mod, itf, router } = this.props\r\n    const selectHref = StoreStateRouterLocationURI(router)\r\n      .setSearch('itf', itf.id)\r\n      .href()\r\n    const isOwned = repository.owner.id === auth.id\r\n    const isJoined = repository.members.find((i: any) => i.id === auth.id)\r\n    return (\r\n      <div className=\"Interface clearfix\">\r\n        <span className=\"name\">\r\n          {itf.locker ? (\r\n            <span className=\"locked mr5\">\r\n              <GoLock />\r\n            </span>\r\n          ) : null}\r\n          <Link\r\n            to={selectHref}\r\n            onClick={e => {\r\n              if (\r\n                this.props.curItf &&\r\n                this.props.curItf.locker &&\r\n                !window.confirm('编辑模式下切换接口，会导致编辑中的资料丢失，是否确定切换接口？')\r\n              ) {\r\n                e.preventDefault()\r\n              }\r\n            }}\r\n          >\r\n            <span>{itf.name}</span>\r\n          </Link>\r\n        </span>\r\n        {isOwned || isJoined ? (\r\n          <div className=\"toolbar\">\r\n            {!itf.locker || itf.locker.id === auth.id ? (\r\n              <span className=\"fake-link\" onClick={() => this.setState({ update: true })}>\r\n                <GoPencil />\r\n              </span>\r\n            ) : null}\r\n            <RModal when={this.state.update} onClose={() => this.setState({ update: false })} onResolve={this.handleUpdate}>\r\n              <InterfaceForm title=\"修改接口\" repository={repository} mod={mod} itf={itf} />\r\n            </RModal>\r\n            {!itf.locker ? (\r\n              <Link to=\"\" onClick={e => this.handleDelete(e, itf)}>\r\n                <GoTrashcan />\r\n              </Link>\r\n            ) : null}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    )\r\n  }\r\n  handleDelete = (e: any, itf: any) => {\r\n    e.preventDefault()\r\n    const message = `接口被删除后不可恢复！\\n确认继续删除『#${itf.id} ${itf.name}』吗？`\r\n    if (window.confirm(message)) {\r\n      const { onDeleteInterface } = this.context\r\n      onDeleteInterface(itf.id, () => {\r\n        const { store } = this.context\r\n        const uri = StoreStateRouterLocationURI(store)\r\n        const deleteHref = this.props.active ? uri.removeSearch('itf').href() : uri.href()\r\n        store.dispatch(replace(deleteHref))\r\n      })\r\n    }\r\n  };\r\n  handleUpdate = () => { /** test */ }\r\n}\r\n\r\nconst Interface = connect((state: any) => ({ router: state.router }))(InterfaceBase)\r\ntype InterfaceListProps = any\r\ntype InterfaceListState = any\r\nclass InterfaceList extends Component<InterfaceListProps, InterfaceListState> {\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = { create: false }\r\n  }\r\n  render() {\r\n    const { auth, repository, mod, itfs = [], itf, curItf } = this.props\r\n    if (!mod.id) { return null }\r\n    const isOwned = repository.owner.id === auth.id\r\n    const isJoined = repository.members.find((i: any) => i.id === auth.id)\r\n    return (\r\n      <article className=\"InterfaceList\">\r\n        <RSortable onChange={this.handleSort} disabled={!isOwned && !isJoined}>\r\n          <ul className=\"body\">\r\n            {itfs.map((item: any) => (\r\n              <li key={item.id} className={item.id === itf.id ? 'active sortable' : 'sortable'} data-id={item.id}>\r\n                <Interface repository={repository} mod={mod} itf={item} active={item.id === itf.id} auth={auth} curItf={curItf} />\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </RSortable>\r\n        {isOwned || isJoined ? (\r\n          <div className=\"footer\">\r\n            <span className=\"fake-link\" onClick={() => this.setState({ create: true })}>\r\n              <span className=\"fontsize-14\">\r\n                <GoRocket />\r\n              </span>{' '}\r\n              新建接口\r\n            </span>\r\n            <RModal when={this.state.create} onClose={() => this.setState({ create: false })} onResolve={this.handleCreate}>\r\n              <InterfaceForm title=\"新建接口\" repository={repository} mod={mod} />\r\n            </RModal>\r\n          </div>\r\n        ) : null}\r\n      </article>\r\n    )\r\n  }\r\n  handleCreate = () => { /** empty */ }\r\n  handleSort = (_: any, sortable: any) => {\r\n    const { onSortInterfaceList } = this.context\r\n    onSortInterfaceList(sortable.toArray())\r\n  };\r\n}\r\nconst mapStateToProps = (state: RootState)  => ({\r\n  auth: state.auth,\r\n  curItf: getCurrentInterface(state),\r\n  router: state.router,\r\n})\r\nconst mapDispatchToProps = {}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InterfaceList)\r\n","import React from 'react'\r\nimport { Button, makeStyles, createStyles, CircularProgress } from '@material-ui/core'\r\nimport { ButtonProps } from '@material-ui/core/Button'\r\nimport { green } from '@material-ui/core/colors'\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    root: {\r\n      position: 'relative',\r\n      display: 'inline',\r\n    },\r\n    buttonProgress: {\r\n      color: green[500],\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      marginTop: -12,\r\n      marginLeft: -12,\r\n    },\r\n  })\r\n)\r\n\r\ninterface Props extends ButtonProps {\r\n  label: string\r\n}\r\n\r\nexport default function LoadingButton(props: Props) {\r\n  const { children, label, ...rest } = props\r\n  const classes = useStyles()\r\n  const loading = props.disabled\r\n  return (\r\n    <div className={classes.root}>\r\n      <Button\r\n        {...rest}\r\n      >\r\n        {loading ? '处理中...' : label}\r\n        {children}\r\n      </Button>\r\n      {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Button, makeStyles, Theme, createStyles } from '@material-ui/core'\r\nimport LoadingButton from '../common/LoadingButton'\r\nimport Create from '@material-ui/icons/Create'\r\nimport KeyboardTab from '@material-ui/icons/KeyboardTab'\r\nimport Save from '@material-ui/icons/Save'\r\nimport Cancel from '@material-ui/icons/Cancel'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from 'actions/types'\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    button: {\r\n      margin: theme.spacing(1),\r\n    },\r\n    leftIcon: {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    rightIcon: {\r\n      marginLeft: theme.spacing(1),\r\n    },\r\n    iconSmall: {\r\n      fontSize: 20,\r\n    },\r\n  })\r\n)\r\n\r\ninterface Props {\r\n  auth: any,\r\n  repository: any,\r\n  locker?: any,\r\n  editable: boolean,\r\n  itfId: number,\r\n  moveInterface: any\r\n  handleSaveInterface: any\r\n  handleUnlockInterface: any\r\n  handleMoveInterface: any\r\n  handleLockInterface: any\r\n}\r\n\r\nfunction InterfaceEditorToolbar(props: Props) {\r\n  const { editable, locker, auth, repository, handleLockInterface, handleMoveInterface,\r\n    handleSaveInterface, handleUnlockInterface } = props\r\n  const isOwned = repository.owner.id === auth.id\r\n  const isJoined = repository.members.find((item: any) => item.id === auth.id)\r\n  const loading = useSelector((state: RootState) => state.loading)\r\n\r\n  const classes = useStyles()\r\n  if (!isOwned && !isJoined) { return null }\r\n  if (editable) {\r\n    return (\r\n      <div className=\"InterfaceEditorToolbar\">\r\n        <LoadingButton className={classes.button} onClick={handleSaveInterface} variant=\"contained\" color=\"primary\" disabled={loading} label=\"保存\">\r\n          <Save className={classes.rightIcon} />\r\n        </LoadingButton>\r\n        <Button className={classes.button} onClick={handleUnlockInterface} variant=\"contained\">\r\n          取消\r\n          <Cancel className={classes.rightIcon} />\r\n        </Button>\r\n        <span className=\"locker-warning hide\">已经锁定当前接口！</span>\r\n      </div>\r\n    )\r\n  }\r\n  if (locker) {\r\n    return (\r\n      <div className=\"InterfaceEditorToolbar\">\r\n        <div className=\"alert alert-danger\">当前接口已经被 <span className=\"nowrap\">{locker.fullname}</span> 锁定！</div>\r\n      </div>\r\n    )\r\n  }\r\n  return (\r\n    <div className=\"InterfaceEditorToolbar\">\r\n      <Button className={classes.button} onClick={handleMoveInterface} variant=\"contained\">\r\n        移动 / 复制\r\n        <KeyboardTab className={classes.rightIcon} />\r\n      </Button>\r\n      <LoadingButton className={classes.button} onClick={handleLockInterface} variant=\"contained\" color=\"primary\" disabled={loading} label=\"编辑\">\r\n        <Create className={classes.rightIcon} />\r\n      </LoadingButton>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InterfaceEditorToolbar\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link, replace, StoreStateRouterLocationURI, PropTypes } from '../../family'\r\nimport { DialogController } from '../utils'\r\nimport { serve } from '../../relatives/services/constant'\r\nimport InterfaceForm from './InterfaceForm'\r\nimport { getRelativeUrl } from '../../utils/URLUtils'\r\nimport './InterfaceSummary.css'\r\nimport { RootState } from 'actions/types'\r\n\r\nexport const BODY_OPTION = {\r\n  FORM_DATA: 'FORM_DATA',\r\n  FORM_URLENCODED: 'FORM_URLENCODED',\r\n  RAW: 'RAW',\r\n  BINARY: 'BINARY',\r\n}\r\nexport const REQUEST_PARAMS_TYPE = {\r\n  HEADERS: 'HEADERS',\r\n  QUERY_PARAMS: 'QUERY_PARAMS',\r\n  BODY_PARAMS: 'BODY_PARAMS',\r\n}\r\nexport function rptFromStr2Num(rpt: any) {\r\n  let pos = 2\r\n  if (rpt === 'HEADERS') {\r\n    pos = 1\r\n  } else if (rpt === 'BODY_PARAMS') {\r\n    pos = 3\r\n  }\r\n  return pos\r\n}\r\ntype InterfaceSummaryProps = {\r\n  store: object,\r\n  [x: string]: any,\r\n}\r\ntype InterfaceSummaryState = {\r\n  bodyOption?: any,\r\n  requestParamsType?: any,\r\n  method?: any,\r\n  status?: any,\r\n  [x: string]: any,\r\n}\r\nclass InterfaceSummary extends Component<InterfaceSummaryProps, InterfaceSummaryState> {\r\n  static contextTypes = {\r\n    // onAddForeignRoomCase: PropTypes.func.isRequired,\r\n    onDeleteInterface: PropTypes.func.isRequired,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = {\r\n      bodyOption: BODY_OPTION.FORM_DATA,\r\n      requestParamsType: props.itf.method === 'POST' ? REQUEST_PARAMS_TYPE.BODY_PARAMS : REQUEST_PARAMS_TYPE.QUERY_PARAMS,\r\n    }\r\n    this.changeMethod = this.changeMethod.bind(this)\r\n    this.changeHandler = this.changeHandler.bind(this)\r\n    this.switchBodyOption = this.switchBodyOption.bind(this)\r\n    this.switchRequestParamsType = this.switchRequestParamsType.bind(this)\r\n    this.state.requestParamsType === REQUEST_PARAMS_TYPE.BODY_PARAMS && props.stateChangeHandler(this.state)\r\n  }\r\n  switchBodyOption(val: any) {\r\n    return () => {\r\n      this.setState(\r\n        {\r\n          bodyOption: val,\r\n        },\r\n        () => {\r\n          this.props.stateChangeHandler(this.state)\r\n        }\r\n      )\r\n    }\r\n  }\r\n  switchRequestParamsType(val: any) {\r\n    return () => {\r\n      this.setState(\r\n        {\r\n          requestParamsType: val,\r\n        },\r\n        () => {\r\n          this.props.stateChangeHandler(this.state)\r\n        }\r\n      )\r\n    }\r\n  }\r\n  changeMethod(method: any) {\r\n    this.setState({ method })\r\n  }\r\n  changeStatus(status: any) {\r\n    this.setState({ status })\r\n  }\r\n  changeHandler(e: any) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    })\r\n  }\r\n  render() {\r\n    const { repository = {}, mod = {}, itf = {}, editable } = this.props\r\n    const { requestParamsType } = this.state\r\n    if (!itf.id) { return null }\r\n    return (\r\n      <div className=\"InterfaceSummary\">\r\n        <div className=\"header\">\r\n          <span className=\"title\">{itf.name}</span>\r\n\r\n          <span className=\"hide\">\r\n            <DialogController content={<InterfaceForm title=\"修改接口\" repository={repository} mod={mod} itf={itf} />} onResolved={this.handleUpdate}>\r\n              <Link to=\"\" onClick={e => e.preventDefault()} title=\"修改接口\" className=\"edit\">\r\n                编辑\r\n              </Link>\r\n            </DialogController>\r\n            <Link to=\"\" onClick={e => this.handleDelete(e, itf)} className=\"delete\">\r\n              删除\r\n            </Link>\r\n          </span>\r\n        </div>\r\n        <ul className=\"summary\">\r\n          <li>\r\n            <span className=\"label\">地址：</span>\r\n            <a href={`${serve}/app/mock/${repository.id}${getRelativeUrl(itf.url || '')}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              {itf.url}\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <span className=\"label\">类型：</span>\r\n            {itf.method}\r\n          </li>\r\n          <li>\r\n            <span className=\"label\">状态码：</span>\r\n            {itf.status}\r\n          </li>\r\n          {itf.description && (\r\n            <li>\r\n              <span className=\"label\">简介：</span>\r\n              {itf.description}\r\n            </li>\r\n          )}\r\n          {editable && (\r\n            <ul className=\"nav nav-tabs\" role=\"tablist\">\r\n              <li className=\"nav-item\" onClick={this.switchRequestParamsType(REQUEST_PARAMS_TYPE.HEADERS)}>\r\n                <button className={`nav-link ${requestParamsType === REQUEST_PARAMS_TYPE.HEADERS ? 'active' : ''}`} role=\"tab\" data-toggle=\"tab\">\r\n                  headers\r\n                </button>\r\n              </li>\r\n              <li className=\"nav-item\" onClick={this.switchRequestParamsType(REQUEST_PARAMS_TYPE.QUERY_PARAMS)}>\r\n                <button className={`nav-link ${requestParamsType === REQUEST_PARAMS_TYPE.QUERY_PARAMS ? 'active' : ''}`} role=\"tab\" data-toggle=\"tab\">\r\n                  Query Params\r\n                </button>\r\n              </li>\r\n              <li className=\"nav-item\" onClick={this.switchRequestParamsType(REQUEST_PARAMS_TYPE.BODY_PARAMS)}>\r\n                <button className={`nav-link ${requestParamsType === REQUEST_PARAMS_TYPE.BODY_PARAMS ? 'active' : ''}`} role=\"tab\" data-toggle=\"tab\">\r\n                  Body Params\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          )}\r\n        </ul>\r\n        {editable && requestParamsType === REQUEST_PARAMS_TYPE.BODY_PARAMS ? (\r\n          <div className=\"body-options\">\r\n            <div className=\"form-check form-check-inline\" onClick={this.switchBodyOption(BODY_OPTION.FORM_DATA)}>\r\n              <input className=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\" />\r\n              <label className=\"form-check-label\" htmlFor=\"inlineRadio1\">\r\n                form-data\r\n              </label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\" onClick={this.switchBodyOption(BODY_OPTION.FORM_URLENCODED)}>\r\n              <input className=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\" />\r\n              <label className=\"form-check-label\" htmlFor=\"inlineRadio2\">\r\n                x-www-form-urlencoded\r\n              </label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\" onClick={this.switchBodyOption(BODY_OPTION.RAW)}>\r\n              <input className=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio3\" value=\"option3\" />\r\n              <label className=\"form-check-label\" htmlFor=\"inlineRadio3\">\r\n                raw\r\n              </label>\r\n            </div>\r\n            <div className=\"form-check form-check-inline\" onClick={this.switchBodyOption(BODY_OPTION.BINARY)}>\r\n              <input className=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio4\" value=\"option4\" />\r\n              <label className=\"form-check-label\" htmlFor=\"inlineRadio4\">\r\n                binary\r\n              </label>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    )\r\n  }\r\n  handleDelete = (e: any, itf: any) => {\r\n    e.preventDefault()\r\n    const message = '接口被删除后不可恢复！\\n确认继续删除吗？'\r\n    if (window.confirm(message)) {\r\n      const { onDeleteInterface } = this.context\r\n      onDeleteInterface(itf.id, () => {\r\n        const { router, replace } = this.props\r\n        const uri = StoreStateRouterLocationURI(router)\r\n        const deleteHref = this.props.active ? uri.removeSearch('itf').href() : uri.href()\r\n        replace(deleteHref)\r\n      })\r\n    }\r\n  }\r\n  handleUpdate = () => { /** empty */ }\r\n  // createCase = (e: any, repositoryId: any, interfaceId: any, name: any) => {\r\n  //   e.preventDefault()\r\n  //   this.setState({ name })\r\n  //   const { onAddForeignRoomCase } = this.context\r\n  //   onAddForeignRoomCase({\r\n  //     id: repositoryId,\r\n  //     itf: interfaceId,\r\n  //     name,\r\n  //   })\r\n  //   // itf.repositoryId\r\n  // }\r\n}\r\nconst mapStateToProps = (state: RootState) => ({\r\n  room: state.foreign,\r\n})\r\nconst mapDispatchToProps = {\r\n  replace,\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InterfaceSummary)\r\n","export function getRelativeUrl(url: any) {\r\n  if (url instanceof RegExp) {\r\n    return url\r\n  }\r\n  if (!url) {\r\n    return ''\r\n  }\r\n  if (url.indexOf('http://') > -1) {\r\n    url = url.substring(url.indexOf('/', 7) + 1)\r\n  } else if (url.indexOf('https://') > -1) {\r\n    url = url.substring(url.indexOf('/', 8) + 1)\r\n  }\r\n  if (url.charAt(0) !== '/') {\r\n    url = '/' + url\r\n  }\r\n  return url\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport Mock from 'mockjs'\r\nimport SmartTextarea from '../utils/SmartTextarea'\r\nimport { Button } from '@material-ui/core'\r\n\r\nexport const TYPES = ['String', 'Number', 'Boolean', 'Object', 'Array', 'Function', 'RegExp']\r\n\r\n// 模拟数据\r\nconst mockProperty = process.env.NODE_ENV === 'development'\r\n  ? () => Mock.mock({\r\n    'scope|1': ['request', 'response'],\r\n    name: '@WORD(6)',\r\n    'type|1': TYPES,\r\n    'value|1': ['@INT', '@FLOAT', '@TITLE', '@NAME'],\r\n    description: '@CSENTENCE',\r\n    parentId: -1,\r\n    interfaceId: '@NATURAL',\r\n    moduleId: '@NATURAL',\r\n    repositoryId: '@NATURAL',\r\n  })\r\n  : () => ({\r\n    scope: 'response',\r\n    name: '',\r\n    type: 'String',\r\n    value: '',\r\n    description: '',\r\n    parentId: -1,\r\n    interfaceId: undefined,\r\n    moduleId: undefined,\r\n    repositoryId: undefined,\r\n  })\r\n\r\nclass PropertyForm extends Component<any, any> {\r\n  static propTypes = {\r\n    scope: PropTypes.string.isRequired,\r\n    parent: PropTypes.object,\r\n    repository: PropTypes.object.isRequired,\r\n    mod: PropTypes.object.isRequired,\r\n    itf: PropTypes.object.isRequired,\r\n  }\r\n  static contextTypes = {\r\n    rmodal: PropTypes.instanceOf(Component),\r\n    handleAddMemoryProperty: PropTypes.func.isRequired,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = mockProperty()\r\n  }\r\n  render() {\r\n    const { rmodal } = this.context\r\n    return (\r\n      <section>\r\n        <div className=\"rmodal-header\">\r\n          <span className=\"rmodal-title\">{this.props.title}</span>\r\n        </div>\r\n        <form className=\"form-horizontal w600\" onSubmit={this.handleSubmit} >\r\n          <div className=\"rmodal-body\">\r\n            <div className=\"form-group row\" style={{}}>\r\n              <label className=\"col-sm-2 control-label\">名称：</label>\r\n              <div className=\"col-sm-10\">\r\n                <input\r\n                  name=\"name\"\r\n                  tabIndex={1}\r\n                  value={this.state.name}\r\n                  onChange={e => this.setState({ name: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Name\"\r\n                  spellCheck={false}\r\n                  autoFocus={true}\r\n                  required={true}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">类型：</label>\r\n              <div className=\"col-sm-10\">\r\n                <select\r\n                  name=\"type\"\r\n                  tabIndex={2}\r\n                  value={this.state.type}\r\n                  onChange={e => this.setState({ type: e.target.value })}\r\n                  className=\"form-control\"\r\n                >\r\n                  {TYPES.map(type =>\r\n                    <option key={type} value={type}>{type}</option>\r\n                  )}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">生成规则：</label>\r\n              <div className=\"col-sm-10\">\r\n                <input\r\n                  name=\"rule\"\r\n                  tabIndex={3}\r\n                  value={this.state.rule}\r\n                  onChange={e => this.setState({ rule: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Rule\"\r\n                  spellCheck={false}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">初始值：</label>\r\n              <div className=\"col-sm-10\">\r\n                <input\r\n                  name=\"value\"\r\n                  tabIndex={4}\r\n                  value={this.state.value}\r\n                  onChange={e => this.setState({ value: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Value\"\r\n                  spellCheck={false}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-sm-2 control-label\">简介：</label>\r\n              <div className=\"col-sm-10\">\r\n                <SmartTextarea\r\n                  tabIndex={5}\r\n                  name=\"description\"\r\n                  value={this.state.description}\r\n                  onChange={(e: any) => this.setState({ description: e.target.value })}\r\n                  className=\"form-control\"\r\n                  placeholder=\"Description\"\r\n                  spellCheck={false}\r\n                  rows=\"5\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"rmodal-footer\">\r\n            <div className=\"form-group row mb0\">\r\n              <label className=\"col-sm-2 control-label\" />\r\n              <div className=\"col-sm-10\">\r\n                <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{ marginRight: 8 }}>提交</Button>\r\n                <Button onClick={() => rmodal.close()}>取消</Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    )\r\n  }\r\n  componentDidUpdate() {\r\n    this.context.rmodal.reposition()\r\n  }\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n    const { auth, repository, mod, itf, scope, parent = { id: -1 } } = this.props\r\n    const { handleAddMemoryProperty } = this.context\r\n    const property = Object.assign({}, this.state, {\r\n      creatorId: auth.id,\r\n      repositoryId: repository.id,\r\n      moduleId: mod.id,\r\n      interfaceId: itf.id,\r\n      scope,\r\n      parentId: parent.id,\r\n    })\r\n    handleAddMemoryProperty(property, () => {\r\n      const { rmodal } = this.context\r\n      if (rmodal) { rmodal.resolve() }\r\n    })\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  auth: state.auth,\r\n})\r\nconst mapDispatchToProps = ({})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PropertyForm)\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, Link, Mock, _ } from '../../family'\r\nimport { Tree } from '../utils'\r\nimport { serve } from '../../relatives/services/constant'\r\nimport { GoLink, GoSync, GoBeaker, GoBug } from 'react-icons/go'\r\n\r\n/*eslint no-useless-escape: 0*/\r\nconst RE_KEY = /(.+)\\|(?:\\+(\\d+)|([\\+\\-]?\\d+-?[\\+\\-]?\\d*)?(?:\\.(\\d+-?\\d*))?)/\r\n\r\nclass Previewer extends Component<any, any> {\r\n  static propTypes = {\r\n    label: PropTypes.string.isRequired,\r\n    scope: PropTypes.string.isRequired,\r\n    properties: PropTypes.array.isRequired,\r\n    itf: PropTypes.object.isRequired,\r\n  }\r\n  render() {\r\n    let scopedTemplate\r\n    let scopedProperties\r\n    let scopedData: any\r\n    let scopedKeys\r\n    let extraKeys\r\n    const { label, scope, properties, itf } = this.props\r\n\r\n    try {\r\n\r\n      // DONE 2.2 支持引用请求参数\r\n      scopedProperties = {\r\n        request: properties.map((property: any) => ({ ...property })).filter((property: any) => property.scope === 'request'),\r\n        response: properties.map((property: any) => ({ ...property })).filter((property: any) => property.scope === 'response'),\r\n      }\r\n      scopedTemplate = {\r\n        request: Tree.treeToJson(Tree.arrayToTree(scopedProperties.request)),\r\n        response: Tree.treeToJson(Tree.arrayToTree(scopedProperties.response)),\r\n      }\r\n      scopedKeys = {\r\n        request: Object.keys(scopedTemplate.request).map(item => item.replace(RE_KEY, '$1')),\r\n        response: Object.keys(scopedTemplate.response).map(item => item.replace(RE_KEY, '$1')),\r\n      }\r\n      extraKeys = _.difference(scopedKeys.request, scopedKeys.response)\r\n      scopedData = {\r\n        request: Mock.mock(scopedTemplate.request),\r\n      }\r\n      scopedData.response = Mock.mock(\r\n        Object.assign({}, _.pick(scopedData.request, extraKeys), scopedTemplate.response)\r\n      )\r\n      scopedData.response = _.pick(scopedData.response, scopedKeys.response)\r\n\r\n      const template = (scopedTemplate as any)[scope]\r\n      let data = scopedData[scope]\r\n      if (data._root_) {\r\n        data = data._root_\r\n      }\r\n\r\n      // DONE 2.1 支持虚拟属性 __root__ √服务端 √前端 √迁移测试\r\n      const keys = Object.keys(data)\r\n      if (keys.length === 1 && keys[0] === '__root__') { data = data.__root__ }\r\n\r\n      const { Assert } = Mock.valid\r\n      const valid = Mock.valid(template, data)\r\n      for (const i of  valid) {\r\n        console.warn(Assert.message(i))\r\n      }\r\n      return (\r\n        <div className=\"Previewer row\">\r\n          <div className=\"result-template col-6\">\r\n            <div className=\"header\">\r\n              <span className=\"title\">{label}模板</span>\r\n              {scope === 'response'\r\n                ? <a href={`${serve}/app/mock/template/${itf.id}`} target=\"_blank\" rel=\"noopener noreferrer\"><GoLink className=\"fontsize-14\" /></a>\r\n                : null}\r\n            </div>\r\n            <pre className=\"body\">{\r\n              JSON.stringify(template, (_: any, v) => {\r\n                if (typeof v === 'function') { return v.toString() }\r\n                if (v !== undefined && v !== null && v.exec) { return v.toString() } else { return v }\r\n              }, 2)\r\n            }</pre>\r\n          </div>\r\n          <div className=\"result-mocked col-6\">\r\n            <div className=\"header\">\r\n              <span className=\"title\">{label}数据</span>\r\n              {scope === 'response'\r\n                ? <a href={`${serve}/app/mock/data/${itf.id}`} target=\"_blank\" rel=\"noopener noreferrer\"><GoLink className=\"mr6 fontsize-14\" /></a>\r\n                : null}\r\n              <Link to=\"\" onClick={e => this.remock(e)}><GoSync className=\"mr6 fontsize-14\" onAnimationEnd={e => this.removeAnimateClass(e)} /></Link>\r\n            </div>\r\n            <pre className=\"body\">{JSON.stringify(data, null, 2)}</pre>\r\n          </div>\r\n          {scope === 'response'\r\n            ? <div className=\"result-valid col-12\">\r\n              {!valid.length\r\n                ? <span><GoBeaker className=\"mr6 fontsize-20\" />模板与数据匹配 √</span>\r\n                : <span><GoBug className=\"mr6 fontsize-20\" />模板与数据不匹配</span>\r\n              }\r\n            </div>\r\n            : null\r\n          }\r\n        </div>\r\n      )\r\n    } catch (ex) {\r\n      scopedData.response = `无法预览Mock数据，因为您编写规则导致如下错误：${ex.message}`\r\n    }\r\n    return <div>发生错误...</div>\r\n  }\r\n  remock = (e: any) => {\r\n    e.preventDefault()\r\n    const target = e.currentTarget.firstChild\r\n    target.classList.add('animated')\r\n    target.classList.add('rotateIn')\r\n    this.forceUpdate()\r\n  }\r\n  removeAnimateClass = (e: any) => {\r\n    const target = e.currentTarget\r\n    target.classList.remove('animated')\r\n    target.classList.remove('rotateIn')\r\n  }\r\n}\r\n\r\nexport default Previewer\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, Link } from '../../family'\r\nimport { Tree, SmartTextarea, RModal, RSortable } from '../utils'\r\nimport PropertyForm from './PropertyForm'\r\nimport Importer from './Importer'\r\nimport Previewer from './InterfacePreviewer'\r\nimport { GoPlus, GoTrashcan, GoQuestion } from 'react-icons/go'\r\nimport { rptFromStr2Num } from './InterfaceSummary'\r\nimport './PropertyList.css'\r\nimport { ButtonGroup, Button } from '@material-ui/core'\r\n\r\nexport const RequestPropertyListPreviewer = (props: any) => (\r\n  <Previewer {...props} />\r\n)\r\n\r\nexport const ResponsePropertyListPreviewer = (props: any) => (\r\n  <Previewer {...props} />\r\n)\r\n\r\n// DONE 2.2 请求属性有什么用？有必要吗？有，用于订制响应数据。\r\n// DONE 2.2 如何过滤模拟 URL 中额外的请求属性？解析 URL 中的参数到请求属性列表吗？可以在响应数据中引用 配置的请求参数 和 URL 中的额外参数。\r\n// DONE 2.2 支持对属性排序\r\n// DONE 2.2 支持对模块排序\r\n// DONE 2.2 支持对接口排序\r\n// TODO 2.3 检测重复属性\r\n\r\nclass SortableTreeTableHeader extends Component<any, any> {\r\n  render() {\r\n    const { editable } = this.props\r\n    return (\r\n      <div className=\"SortableTreeTableHeader\">\r\n        <div className=\"flex-row\">\r\n          {/* DONE 2.1 每列增加帮助 Tip */}\r\n          {editable && <div className=\"th operations\" />}\r\n          <div className=\"th name\">名称</div>\r\n          <div className=\"th type\">必选</div>\r\n          <div className=\"th type\">类型</div>\r\n          {/* TODO 2.3 规则编辑器 */}\r\n          <div className=\"th rule\">\r\n            生成规则\r\n            <a\r\n              href=\"https://github.com/nuysoft/Mock/wiki/Syntax-Specification\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"helper\"\r\n              target=\"_blank\"\r\n            >\r\n              <GoQuestion />\r\n            </a>\r\n          </div>\r\n          <div className=\"th value\">初始值</div>{/* 对象和数组也允许设置初始值 */}\r\n          <div className=\"th desc\">简介</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst PropertyLabel = (props: any) => {\r\n  const { pos } = props\r\n  if (pos === 1) {\r\n    return <label className=\"ml5 badge badge-danger\">HEAD</label>\r\n  } else if (pos === 3) {\r\n    return <label className=\"ml5 badge badge-primary\">BODY</label>\r\n  } else {\r\n    return <label className=\"ml5 badge badge-secondary\">QUERY</label>\r\n  }\r\n}\r\n\r\nclass SortableTreeTableRow extends Component<any, any> {\r\n  render() {\r\n    const { property, editable } = this.props\r\n    const { handleClickCreateChildPropertyButton, handleDeleteMemoryProperty, handleChangePropertyField, handleSortProperties } = this.props\r\n    return (\r\n      <RSortable group={property.depth} handle=\".SortableTreeTableRow\" disabled={!editable} onChange={handleSortProperties}>\r\n        <div className={`RSortableWrapper depth${property.depth}`}>\r\n          {property.children.sort((a: any, b: any) => a.priority - b.priority).map((item: any) =>\r\n            <div key={item.id} className=\"SortableTreeTableRow\" data-id={item.id}>\r\n              <div className=\"flex-row\">\r\n                {editable &&\r\n                  <div className=\"td operations nowrap\">\r\n                    {(item.type === 'Object' || item.type === 'Array')\r\n                      ? <Link\r\n                        to=\"\"\r\n                        onClick={e => { e.preventDefault(); handleClickCreateChildPropertyButton(item) }}\r\n                      >\r\n                        <GoPlus className=\"fontsize-14 color-6\" />\r\n                      </Link>\r\n                      : null}\r\n                    <Link to=\"\" onClick={e => handleDeleteMemoryProperty(e, item)}><GoTrashcan className=\"fontsize-14 color-6\" /></Link>\r\n                  </div>\r\n                }\r\n                <div className={`td payload name depth-${item.depth} nowrap`}>\r\n                  {!editable\r\n                    ? <span className=\"nowrap\">\r\n                      {item.name}\r\n                      {item.scope === 'request' && item.depth === 0 ? <PropertyLabel pos={item.pos} /> : null}\r\n                    </span>\r\n                    : <input\r\n                      value={item.name}\r\n                      onChange={e => handleChangePropertyField(item.id, 'name', e.target.value)}\r\n                      className=\"form-control editable\"\r\n                      spellCheck={false}\r\n                      placeholder=\"\"\r\n                    />\r\n                  }\r\n                </div>\r\n                <div className={`td payload type depth-${item.depth} nowrap`}>\r\n                  {!editable\r\n                    ? <span className=\"nowrap\">{item.required ? '✔️' : ''}</span>\r\n                    : <input\r\n                      type=\"checkbox\"\r\n                      checked={!!item.required}\r\n                      onChange={e => handleChangePropertyField(item.id, 'required', e.target.checked)}\r\n                    />\r\n                  }\r\n                </div>\r\n\r\n                <div className=\"td payload type\">\r\n                  {!editable\r\n                    ? <span className=\"nowrap\">{item.type}</span>\r\n                    : <select\r\n                      value={item.type}\r\n                      onChange={e => handleChangePropertyField(item.id, 'type', e.target.value)}\r\n                      className=\"form-control editable\"\r\n                    >\r\n                      {['String', 'Number', 'Boolean', 'Object', 'Array', 'Function', 'RegExp'].map(type =>\r\n                        <option key={type} value={type}>{type}</option>\r\n                      )}\r\n                    </select>\r\n                  }\r\n                </div>\r\n                <div className=\"td payload rule nowrap\">\r\n                  {!editable\r\n                    ? <span className=\"nowrap\">{item.rule}</span>\r\n                    : <input\r\n                      value={item.rule || ''}\r\n                      onChange={e => handleChangePropertyField(item.id, 'rule', e.target.value)}\r\n                      className=\"form-control editable\"\r\n                      spellCheck={false}\r\n                      placeholder=\"\"\r\n                    />\r\n                  }\r\n                </div>\r\n                <div className=\"td payload value\">\r\n                  {!editable\r\n                    ? <span>{item.value}</span>\r\n                    : <SmartTextarea\r\n                      value={item.value || ''}\r\n                      onChange={(e: any) => handleChangePropertyField(item.id, 'value', e.target.value)}\r\n                      rows=\"1\"\r\n                      className=\"form-control editable\"\r\n                      spellCheck={false}\r\n                      placeholder=\"\"\r\n                    />\r\n                  }\r\n                </div>\r\n                <div className=\"td payload desc\">\r\n                  {!editable\r\n                    ? <span>{item.description}</span>\r\n                    : <SmartTextarea\r\n                      value={item.description || ''}\r\n                      onChange={(e: any) => handleChangePropertyField(item.id, 'description', e.target.value)}\r\n                      rows=\"1\"\r\n                      className=\"form-control editable\"\r\n                      spellCheck={false}\r\n                      placeholder=\"\"\r\n                    />\r\n                  }\r\n                </div>\r\n              </div>\r\n              {item.children && item.children.length ? <SortableTreeTableRow {...this.props} property={item} /> : null}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </RSortable>\r\n    )\r\n  }\r\n}\r\n\r\nclass SortableTreeTable extends Component<any, any> {\r\n  render() {\r\n    const { root, editable } = this.props\r\n    return (\r\n      <div className={`SortableTreeTable ${editable ? 'editable' : ''}`}>\r\n        <SortableTreeTableHeader {...this.props} />\r\n        <SortableTreeTableRow {...this.props} property={root} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass PropertyList extends Component<any, any> {\r\n  static propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    label: PropTypes.string.isRequired,\r\n    scope: PropTypes.string.isRequired,\r\n    properties: PropTypes.array,\r\n    repository: PropTypes.object.isRequired,\r\n    mod: PropTypes.object.isRequired,\r\n    itf: PropTypes.object.isRequired,\r\n    editable: PropTypes.bool.isRequired,\r\n\r\n    /** optional */\r\n    bodyOption: PropTypes.string,\r\n    requestParamsType: PropTypes.string,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = {\r\n      createProperty: false,\r\n      createChildProperty: false,\r\n      previewer: props.scope === 'response',\r\n      importer: false,\r\n    }\r\n  }\r\n  render() {\r\n    const { title, label, scope, properties = [], repository = {}, mod = {}, itf = {} } = this.props\r\n    if (!itf.id) { return null }\r\n    const { editable, requestParamsType } = this.props // itf.locker && (itf.locker.id === auth.id)\r\n    const pos = rptFromStr2Num(requestParamsType)\r\n    let scopedProperties = properties.map((property: any) => ({ ...property })).filter((property: any) => property.scope === scope)\r\n    if (scope === 'request' && editable) {\r\n      scopedProperties = scopedProperties.filter((s: any) => s.pos === pos)\r\n    }\r\n\r\n    return (\r\n      <section className=\"PropertyList\">\r\n        <div className=\"header clearfix\">\r\n          <span className=\"title\">{title || `${label}属性`}</span>\r\n          <div className=\"toolbar\">\r\n            <ButtonGroup size=\"small\" color=\"primary\">\r\n              {editable && [\r\n                <Button key={1} onClick={this.handleClickCreatePropertyButton}>新建</Button>,\r\n                <Button key={2} onClick={this.handleClickImporterButton}>导入</Button>,\r\n              ]}\r\n              <Button onClick={this.handleClickPreviewerButton}>\r\n                预览\r\n              </Button>\r\n            </ButtonGroup>\r\n          </div>\r\n        </div>\r\n        <div className=\"body\">\r\n          <SortableTreeTable\r\n            root={Tree.arrayToTree(scopedProperties)}\r\n            editable={editable}\r\n            handleClickCreateChildPropertyButton={this.handleClickCreateChildPropertyButton}\r\n            handleDeleteMemoryProperty={this.handleDeleteMemoryProperty}\r\n            handleChangePropertyField={this.handleChangePropertyField}\r\n            handleSortProperties={this.handleSortProperties}\r\n          />\r\n        </div>\r\n        <div className=\"footer\">\r\n          {this.state.previewer && <Previewer scope={scope} label={label} properties={properties} itf={itf} />}\r\n        </div>\r\n        <RModal\r\n          when={this.state.createProperty}\r\n          onClose={() => this.setState({ createProperty: false })}\r\n          onResolve={this.handleCreatePropertySucceeded}\r\n        >\r\n          <PropertyForm title={`新建${label}属性`} scope={scope} repository={repository} mod={mod} itf={itf} />\r\n        </RModal>\r\n        <RModal\r\n          when={!!this.state.createChildProperty}\r\n          onClose={() => this.setState({ createChildProperty: false })}\r\n          onResolve={this.handleCreatePropertySucceeded}\r\n        >\r\n          <PropertyForm title={`新建${label}属性`} scope={scope} repository={repository} mod={mod} itf={itf} parent={this.state.createChildProperty} />\r\n        </RModal>\r\n        <RModal when={this.state.importer} onClose={() => this.setState({ importer: false })} onResolve={this.handleCreatePropertySucceeded}>\r\n          <Importer title={`导入${label}属性`} repository={repository} mod={mod} itf={itf} scope={scope} />\r\n        </RModal>\r\n      </section>\r\n    )\r\n  }\r\n  handleClickCreatePropertyButton = () => {\r\n    this.setState({ createProperty: true })\r\n  }\r\n  handleClickCreateChildPropertyButton = (item: any) => {\r\n    this.setState({ createChildProperty: item })\r\n  }\r\n  handleClickImporterButton = () => {\r\n    this.setState({ importer: true })\r\n  }\r\n  handleClickPreviewerButton = () => {\r\n    this.setState({ previewer: !this.state.previewer })\r\n  }\r\n  handleChangePropertyField = (id: any, key: any, value: any) => {\r\n    const { handleChangeProperty } = this.props\r\n    const { properties } = this.props\r\n    const property = properties.find((property: any) => property.id === id)\r\n    handleChangeProperty({ ...property, [key]: value })\r\n  }\r\n  handleCreatePropertySucceeded = () => {\r\n    /** empty */\r\n  }\r\n  handleDeleteMemoryProperty = (e: any, property: any) => {\r\n    e.preventDefault()\r\n    const { handleDeleteMemoryProperty } = this.props\r\n    handleDeleteMemoryProperty(property)\r\n  }\r\n  handleSortProperties = (_: any, sortable: any) => {\r\n    const { properties } = this.props\r\n    const ids = sortable.toArray()\r\n    ids.forEach((id: any, index: any) => {\r\n      const property = properties.find((item: any) => item.id === id || item.id === +id)\r\n      property.priority = index + 1\r\n    })\r\n  }\r\n}\r\n\r\nexport default PropertyList\r\n","import React, { useState, useContext, useEffect } from 'react'\r\nimport { moveInterface } from '../../actions/interface'\r\nimport { Button, Select, MenuItem, FormControl, RadioGroup, FormControlLabel, Radio, Theme, makeStyles } from '@material-ui/core'\r\nimport { useDispatch } from 'react-redux'\r\nimport { ModalContext } from 'components/utils/RModal'\r\n\r\nexport const OP_MOVE = 1\r\nexport const OP_COPY = 2\r\n\r\nconst useStyles = makeStyles(({ spacing }: Theme) => ({\r\n  root: {\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: spacing(2),\r\n    flex: 1,\r\n  },\r\n  preview: {\r\n    marginTop: spacing(1),\r\n  },\r\n  form: {\r\n    minWidth: 500,\r\n    minHeight: 300,\r\n  },\r\n  formTitle: {\r\n    color: 'rgba(0, 0, 0, 0.54)',\r\n    fontSize: 9,\r\n  },\r\n  formItem: {\r\n    marginBottom: spacing(1),\r\n  },\r\n  ctl: {\r\n    marginTop: spacing(3),\r\n  },\r\n}))\r\n\r\ninterface Props {\r\n  title: string\r\n  repository: any\r\n  itfId: number\r\n}\r\n\r\n// constructor(props: any) {\r\n//   super(props)\r\n//   const { repository } = props\r\n\r\n//   this.state = { modId, op: OP_MOVE }\r\n// }\r\nexport default function MoveInterfaceForm(props: Props) {\r\n  const { repository, title, itfId } = props\r\n  const classes = useStyles()\r\n  let modIdInit = 0\r\n  if (repository.modules.length > 0) {\r\n    modIdInit = repository.modules[0].id\r\n  }\r\n  const [modId, setModId] = useState(modIdInit)\r\n  const [op, setOp] = useState(OP_MOVE)\r\n\r\n  const dispatch = useDispatch()\r\n  const rmodal = useContext(ModalContext)\r\n\r\n  useEffect(() => {\r\n    rmodal && rmodal.reposition()\r\n  }, [rmodal])\r\n\r\n  const handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n    const params = {\r\n      modId,\r\n      op,\r\n      itfId,\r\n      repoId: repository.id,\r\n    }\r\n    dispatch(moveInterface(params, () => {\r\n      rmodal && rmodal.resolve()\r\n    }))\r\n  }\r\n  return (\r\n    <section>\r\n      <div className=\"rmodal-header\">\r\n        <span className=\"rmodal-title\">{title}</span>\r\n      </div>\r\n      <form className=\"form-horizontal w600\" onSubmit={handleSubmit} >\r\n        <div className=\"rmodal-body\">\r\n          <div className={classes.formTitle}>选择目标模块：</div>\r\n          <FormControl>\r\n            <Select onChange={e => setModId(+(e.target.value as any as string))} value={modId} fullWidth={true}>\r\n              {repository.modules.map((x: any) => <MenuItem key={x.id} value={x.id} >{x.name}</MenuItem>)}\r\n            </Select>\r\n          </FormControl>\r\n          <div className={classes.formTitle}>选择目标模块：</div>\r\n          <RadioGroup\r\n            name=\"radioListOp\"\r\n            value={String(op)}\r\n            onChange={e => {setOp(+(e.target as any).value) }}\r\n            row={true}\r\n          >\r\n            <FormControlLabel value={String(OP_COPY)} control={<Radio />} label=\"复制\" />\r\n            <FormControlLabel value={String(OP_MOVE)} control={<Radio />} label=\"移动\" />\r\n          </RadioGroup>\r\n          <div className=\"rmodal-footer\">\r\n            <div className=\"form-group row mb0\">\r\n              <label className=\"col-sm-2 control-label\" />\r\n              <div className=\"col-sm-10\">\r\n                <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{ marginRight: 8 }}>提交</Button>\r\n                <Button onClick={() => rmodal && rmodal.close()}>取消</Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </section >\r\n  )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, connect, _ } from '../../family'\r\nimport InterfaceEditorToolbar from './InterfaceEditorToolbar'\r\nimport InterfaceSummary, { BODY_OPTION, REQUEST_PARAMS_TYPE, rptFromStr2Num } from './InterfaceSummary'\r\nimport PropertyList from './PropertyList'\r\nimport { RModal } from '../utils'\r\nimport MoveInterfaceForm from './MoveInterfaceForm'\r\nimport { fetchRepository } from '../../actions/repository'\r\nimport { RootState } from 'actions/types'\r\nimport { lockInterface, unlockInterface } from 'actions/interface'\r\nimport { updateProperties } from 'actions/property'\r\n\r\nexport const RequestPropertyList = (props: any) => {\r\n  return <PropertyList scope=\"request\" title=\"请求参数\" label=\"请求\" {...props} />\r\n}\r\nexport const ResponsePropertyList = (props: any) => (\r\n  <PropertyList scope=\"response\" title=\"响应内容\" label=\"响应\" {...props} />\r\n)\r\ntype InterfaceEditorProps = {\r\n  auth: any\r\n  itf: any\r\n  properties: any[]\r\n  mod: any\r\n  repository: any\r\n  lockInterface: typeof lockInterface\r\n  unlockInterface: typeof unlockInterface\r\n  updateProperties: typeof updateProperties\r\n}\r\n\r\ntype InterfaceEditorState = {\r\n  summaryState: any\r\n  itf: any\r\n  properties: any\r\n  editable: boolean\r\n  moveInterfaceDialogOpen: boolean,\r\n}\r\n// TODO 2.x 参考 MySQL Workbench 的字段编辑器\r\n// TODO 2.x 支持复制整个接口到其他模块、其他项目\r\nclass InterfaceEditor extends Component<\r\n  InterfaceEditorProps,\r\n  InterfaceEditorState\r\n  > {\r\n  static childContextTypes = {\r\n    handleLockInterface: PropTypes.func.isRequired,\r\n    handleUnlockInterface: PropTypes.func.isRequired,\r\n    handleSaveInterface: PropTypes.func.isRequired,\r\n    handleMoveInterface: PropTypes.func.isRequired,\r\n    handleAddMemoryProperty: PropTypes.func.isRequired,\r\n    handleAddMemoryProperties: PropTypes.func.isRequired,\r\n    handleDeleteMemoryProperty: PropTypes.func.isRequired,\r\n    handleChangeProperty: PropTypes.func.isRequired,\r\n  }\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = {\r\n      ...InterfaceEditor.mapPropsToState(props),\r\n      summaryState: {\r\n        bodyOption: BODY_OPTION.FORM_DATA,\r\n        requestParamsType: REQUEST_PARAMS_TYPE.QUERY_PARAMS,\r\n      },\r\n      moveInterfaceDialogOpen: false,\r\n    }\r\n    this.summaryStateChange = this.summaryStateChange.bind(this)\r\n    // { itf: {}, properties: [] }\r\n  }\r\n  static mapPropsToState(prevProps: any, prevStates: any = {}) {\r\n    const { auth, itf, properties } = prevProps\r\n    return {\r\n      ...prevStates,\r\n      itf,\r\n      properties: properties.map((property: any) => ({ ...property })),\r\n      editable: !!(itf.locker && (itf.locker.id === auth.id)),\r\n    }\r\n  }\r\n  getChildContext() {\r\n    return _.pick(this, Object.keys(InterfaceEditor.childContextTypes))\r\n  }\r\n\r\n  summaryStateChange(summaryState: any) {\r\n    this.setState({ summaryState })\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps: any) {\r\n    if (\r\n      nextProps.itf.id === this.state.itf.id &&\r\n      nextProps.itf.updatedAt === this.state.itf.updatedAt\r\n    ) { return }\r\n    const prevStates = this.state\r\n    this.setState(InterfaceEditor.mapPropsToState(nextProps, prevStates))\r\n  }\r\n  // Use shouldComponentUpdate() to let React know if a component's output is not affected by the current change in state or props.\r\n  // TODO 2.2\r\n  // shouldComponentUpdate (nextProps, nextState) {}\r\n\r\n  render() {\r\n    const { auth, repository, mod, itf } = this.props\r\n    const { editable } = this.state\r\n    const { id, locker } = this.state.itf\r\n    if (!id) { return null }\r\n    return (\r\n      <article className=\"InterfaceEditor\">\r\n        <InterfaceEditorToolbar\r\n          locker={locker}\r\n          auth={auth}\r\n          repository={repository}\r\n          editable={editable}\r\n          itfId={itf.id}\r\n          moveInterface={this.handleMoveInterface}\r\n          handleLockInterface={this.handleLockInterface}\r\n          handleMoveInterface={this.handleMoveInterface}\r\n          handleSaveInterface={this.handleSaveInterface}\r\n          handleUnlockInterface={this.handleUnlockInterface}\r\n        />\r\n        <InterfaceSummary\r\n          repository={repository}\r\n          mod={mod}\r\n          itf={itf}\r\n          active={true}\r\n          editable={editable}\r\n          stateChangeHandler={this.summaryStateChange}\r\n        />\r\n        <RequestPropertyList\r\n          properties={this.state.properties}\r\n          editable={editable}\r\n          repository={repository}\r\n          mod={mod}\r\n          itf={this.state.itf}\r\n          bodyOption={this.state.summaryState.bodyOption}\r\n          requestParamsType={this.state.summaryState.requestParamsType}\r\n          handleChangeProperty={this.handleChangeProperty}\r\n          handleDeleteMemoryProperty={this.handleDeleteMemoryProperty}\r\n        />\r\n        <ResponsePropertyList\r\n          properties={this.state.properties}\r\n          editable={editable}\r\n          repository={repository}\r\n          mod={mod}\r\n          itf={this.state.itf}\r\n          handleChangeProperty={this.handleChangeProperty}\r\n          handleDeleteMemoryProperty={this.handleDeleteMemoryProperty}\r\n        />\r\n        <RModal\r\n          when={this.state.moveInterfaceDialogOpen}\r\n          onClose={() => this.setState({ moveInterfaceDialogOpen: false })}\r\n          onResolve={this.handleMoveInterfaceSubmit}\r\n        >\r\n          <MoveInterfaceForm title=\"移动接口\" repository={repository} itfId={itf.id} />\r\n        </RModal>\r\n      </article>\r\n    )\r\n  }\r\n  handleAddMemoryProperty = (property: any, cb: any) => {\r\n    this.handleAddMemoryProperties([property], cb)\r\n  }\r\n  handleAddMemoryProperties = (properties: any, cb: any) => {\r\n    const requestParamsType = this.state.summaryState.requestParamsType\r\n    const rpt = rptFromStr2Num(requestParamsType)\r\n\r\n    properties.forEach((item: any) => {\r\n      if (item.memory === undefined) { item.memory = true }\r\n      if (item.id === undefined) { item.id = _.uniqueId('memory-') }\r\n      item.pos = rpt\r\n    })\r\n    const nextState = { properties: [...this.state.properties, ...properties] }\r\n    this.setState(nextState, () => {\r\n      if (cb) { cb(properties) }\r\n    })\r\n  }\r\n  handleDeleteMemoryProperty = (property: any, cb: any) => {\r\n    const properties = [...this.state.properties]\r\n    const index = properties.findIndex(item => item.id === property.id)\r\n    if (index >= 0) {\r\n      properties.splice(index, 1)\r\n\r\n      // 清除后代属性\r\n      const deletedParentIds = [property.id]\r\n      for (let index = 0; index < properties.length; index++) {\r\n        if (deletedParentIds.indexOf(properties[index].parentId) !== -1) {\r\n          deletedParentIds.push(properties[index].id)\r\n          properties.splice(index--, 1)\r\n          index = 0 // 强制从头开始查找，避免漏掉后代属性\r\n        }\r\n      }\r\n\r\n      this.setState({ properties }, () => {\r\n        if (cb) { cb() }\r\n      })\r\n    }\r\n  }\r\n  handleChangeProperty = (property: any) => {\r\n    const properties = [...this.state.properties]\r\n    const index = properties.findIndex(item => item.id === property.id)\r\n    if (index >= 0) {\r\n      properties.splice(index, 1, property)\r\n      this.setState({ properties })\r\n    }\r\n  }\r\n  handleSaveInterface = (e: any) => {\r\n    e.preventDefault()\r\n    const { updateProperties } = this.props\r\n    updateProperties(this.state.itf.id, this.state.properties, this.state.summaryState, () => {\r\n      this.handleUnlockInterface()\r\n    })\r\n  }\r\n  handleMoveInterface = () => {\r\n    this.setState({\r\n      moveInterfaceDialogOpen: true,\r\n    })\r\n  }\r\n  handleMoveInterfaceSubmit = () => {\r\n    console.log('submit')\r\n    /** empty */\r\n  }\r\n  handleLockInterface = () => {\r\n    const { itf, lockInterface } = this.props\r\n    lockInterface(itf.id)\r\n  }\r\n  handleUnlockInterface = () => {\r\n    const { itf, unlockInterface } = this.props\r\n    unlockInterface(itf.id)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n  fetchRepository,\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  lockInterface,\r\n  unlockInterface,\r\n  updateProperties,\r\n}\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(InterfaceEditor)\r\n","import React, { Component } from 'react'\r\nimport { Link, StoreStateRouterLocationURI } from '../../family'\r\nimport { GoAlert } from 'react-icons/go'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { RouterState } from 'connected-react-router'\r\n\r\ntype DuplicatedInterfacesWarningState = any\r\ntype DuplicatedInterfacesWarningProps = {\r\n  repository: any\r\n  router: RouterState\r\n}\r\nclass DuplicatedInterfacesWarning extends Component<DuplicatedInterfacesWarningProps, DuplicatedInterfacesWarningState> {\r\n  static contextTypes = {\r\n    store: PropTypes.object,\r\n  }\r\n\r\n  static parseDuplicatedInterfaces(repository: any) {\r\n    const counter: any = {}\r\n    for (const mod of repository.modules) {\r\n      for (const itf of mod.interfaces) {\r\n        const key = `${itf.method} ${itf.url}`\r\n        if (!counter[key]) { counter[key] = [] }\r\n        counter[key] = [...counter[key], { ...itf, mod }]\r\n      }\r\n    }\r\n    const duplicated: any[] = []\r\n    for (const key in counter) {\r\n      if (counter[key].length > 1) {\r\n        duplicated.push(counter[key])\r\n      }\r\n    }\r\n    return duplicated\r\n  }\r\n  static printDuplicatedInterfacesWarning(duplicated: any) {\r\n    duplicated.forEach((interfaces: any) => {\r\n      const key = `${interfaces[0].method} ${interfaces[0].url}`\r\n      console.group('警告：检测到重复接口 ' + key)\r\n      interfaces.forEach((itf: any) => {\r\n        console.warn(`#${itf.id} ${itf.method} ${itf.url}`)\r\n      })\r\n      console.groupEnd()\r\n    })\r\n  }\r\n  render() {\r\n    const { repository, router } = this.props\r\n    if (!repository) { return null }\r\n    const duplicated = DuplicatedInterfacesWarning.parseDuplicatedInterfaces(repository)\r\n    if (!duplicated.length) { return null }\r\n    const uri = StoreStateRouterLocationURI(router)\r\n      .removeSearch('page')\r\n      .removeSearch('itf')\r\n    return (\r\n      <div className=\"DuplicatedInterfacesWarning\">\r\n        {duplicated.map((interfaces, index) => (\r\n          <div key={index} className=\"alert alert-warning mb6\">\r\n            <span className=\"title\">\r\n              <GoAlert className=\"icon\" />\r\n              <span className=\"msg\">警告：检测到重复接口</span>\r\n              <span className=\"itf\">\r\n                {interfaces[0].method} {interfaces[0].url || '-'}\r\n              </span>\r\n            </span>\r\n            {interfaces.map((itf: any) => (\r\n              <Link\r\n                key={itf.id}\r\n                to={uri\r\n                  .setSearch('mod', itf.mod.id)\r\n                  .setSearch('itf', itf.id)\r\n                  .href()}\r\n                className=\"mr12\"\r\n              >\r\n                {itf.name}\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default connect((state: any) => ({\r\n  router: state.router,\r\n}))(DuplicatedInterfacesWarning)\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { RParsley } from '../utils'\r\nimport config from '../../config'\r\n\r\nclass ExportPostmanForm extends Component<any, any> {\r\n  static contextTypes = {\r\n    rmodal: PropTypes.object.isRequired,\r\n  }\r\n  static propTypes = {\r\n    repoId: PropTypes.number,\r\n  }\r\n  rparsley: any\r\n  render() {\r\n    const { rmodal } = this.context\r\n    const { repoId } = this.props\r\n    return (\r\n      <section className=\"RepositoryForm\">\r\n        <div className=\"rmodal-header\">\r\n          <span className=\"rmodal-title\">{this.props.title}</span>\r\n        </div>\r\n        <RParsley ref={rparsley => { this.rparsley = rparsley }}>\r\n          <form className=\"form-horizontal\" onSubmit={() => false} >\r\n            <div className=\"rmodal-body\">\r\n              <div>\r\n                请在Postman中点击导入（Import），选择从链接导入（Import From Link），输入如下链接即可。\r\n              </div>\r\n              <div className=\"alert alert-info\" role=\"alert\" style={{ margin: '8px 0' }}> {config.serve}/postman/export?id={repoId} </div>\r\n            </div>\r\n            <div className=\"rmodal-footer\">\r\n              <div className=\"form-group row mb0\">\r\n                <label className=\"col-sm-2 control-label\" />\r\n                <div className=\"col-sm-10\">\r\n                  <button onClick={e => { e.preventDefault(); rmodal.close() }} className=\"mr10 btn btn-secondary\">关闭</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </RParsley>\r\n      </section>\r\n    )\r\n  }\r\n  componentDidUpdate() {\r\n    this.context.rmodal.reposition()\r\n  }\r\n  handleSubmit = (e: any) => {\r\n    e.preventDefault()\r\n\r\n    if (!this.rparsley.isValid()) { return }\r\n\r\n    const { onAddRepository, onUpdateRepository } = this.context\r\n    const onAddOrUpdateRepository = this.state.id ? onUpdateRepository : onAddRepository\r\n    const { organization } = this.props\r\n    const repository: any = {\r\n      ...this.state,\r\n      // ownerId: owner.id, // DONE 2.2 支持转移仓库\r\n      organizationId: organization ? organization.id : null,\r\n      memberIds: (this.state.members || []).map((user: any) => user.id),\r\n    }\r\n    const { owner, newOwner } = this.state\r\n    if (newOwner && newOwner.id !== owner.id) { repository.ownerId = newOwner.id }\r\n    const { rmodal } = this.context\r\n    rmodal.close()\r\n    onAddOrUpdateRepository(repository, () => {\r\n      if (rmodal) { rmodal.resolve() }\r\n    })\r\n  }\r\n}\r\n\r\nexport default ExportPostmanForm\r\n","import React, { Component } from 'react'\r\nimport { PropTypes, connect, Link, replace, _ } from '../../family'\r\nimport { serve } from '../../relatives/services/constant'\r\nimport { RModal, Spin } from '../utils'\r\nimport RepositoryForm from '../repository/RepositoryForm'\r\nimport RepositorySearcher from './RepositorySearcher'\r\nimport ModuleList from './ModuleList'\r\nimport InterfaceList from './InterfaceList'\r\nimport InterfaceEditor from './InterfaceEditor'\r\nimport DuplicatedInterfacesWarning from './DuplicatedInterfacesWarning'\r\nimport { addRepository, updateRepository, clearRepository, fetchRepository } from '../../actions/repository'\r\nimport { addModule, updateModule, deleteModule, sortModuleList } from '../../actions/module'\r\nimport { addInterface, updateInterface, deleteInterface, lockInterface, unlockInterface, sortInterfaceList } from '../../actions/interface'\r\nimport { addProperty, updateProperty, deleteProperty, updateProperties, sortPropertyList } from '../../actions/property'\r\nimport { GoRepo, GoPencil, GoPlug, GoDatabase, GoJersey, GoLinkExternal } from 'react-icons/go'\r\n\r\nimport './RepositoryEditor.css'\r\nimport ExportPostmanForm from '../repository/ExportPostmanForm'\r\nimport { RootState } from 'actions/types'\r\n\r\n// DONE 2.1 import Spin from '../utils/Spin'\r\n// TODO 2.2 缺少测试器\r\n// DONE 2.2 各种空数据下的视觉效果：空仓库、空模块、空接口、空属性\r\n// TODO 2.1 大数据测试，含有大量模块、接口、属性的仓库\r\n\r\n// 展示组件\r\nclass RepositoryEditor extends Component<any, any> {\r\n  static propTypes = {\r\n    auth: PropTypes.object.isRequired,\r\n    repository: PropTypes.object.isRequired,\r\n    location: PropTypes.object.isRequired,\r\n    onClearRepository: PropTypes.func.isRequired,\r\n  }\r\n  static childContextTypes = {\r\n    onAddRepository: PropTypes.func.isRequired,\r\n    onUpdateRepository: PropTypes.func.isRequired,\r\n    onAddModule: PropTypes.func.isRequired,\r\n    onUpdateModule: PropTypes.func.isRequired,\r\n    onDeleteModule: PropTypes.func.isRequired,\r\n    onSortModuleList: PropTypes.func.isRequired,\r\n    onAddInterface: PropTypes.func.isRequired,\r\n    onUpdateInterface: PropTypes.func.isRequired,\r\n    onDeleteInterface: PropTypes.func.isRequired,\r\n    onLockInterface: PropTypes.func.isRequired,\r\n    onUnlockInterface: PropTypes.func.isRequired,\r\n    onSortInterfaceList: PropTypes.func.isRequired,\r\n    onAddProperty: PropTypes.func.isRequired,\r\n    onUpdateProperty: PropTypes.func.isRequired,\r\n    onUpdateProperties: PropTypes.func.isRequired,\r\n    onDeleteProperty: PropTypes.func.isRequired,\r\n    onSortPropertyList: PropTypes.func.isRequired,\r\n  }\r\n\r\n  constructor(props: any) {\r\n    super(props)\r\n    this.state = {\r\n      update: false,\r\n      exportPostman: false,\r\n    }\r\n  }\r\n  getChildContext() {\r\n    return _.pick(this.props, Object.keys(RepositoryEditor.childContextTypes))\r\n  }\r\n\r\n  componentDidMount() {\r\n    const id = +this.props.location.params.id\r\n    if (!this.props.repository.data || this.props.repository.data.id !== id) {\r\n      this.props.onFetchRepository({ id })\r\n    }\r\n  }\r\n  render() {\r\n    const { location: { params }, auth } = this.props\r\n    let { repository } = this.props\r\n    if (!repository.fetching && !repository.data) { return <div className=\"p100 fontsize-40 text-center\">404</div> }\r\n\r\n    repository = repository.data\r\n    if (repository.name) {\r\n      document.title = `RAP2 ${repository.name}`\r\n    }\r\n    if (!repository.id) { return <Spin /> } // // DONE 2.2 每次获取仓库都显示加载动画不合理，应该只在初始加载时显示动画。\r\n\r\n    const mod = repository && repository.modules && repository.modules.length\r\n      ? (repository.modules.find((item: any) => item.id === +params.mod) || repository.modules[0]) : {}\r\n    const itf = mod.interfaces && mod.interfaces.length\r\n      ? (mod.interfaces.find((item: any) => item.id === +params.itf) || mod.interfaces[0]) : {}\r\n    const properties = itf.properties || []\r\n\r\n    const ownerlink = repository.organization\r\n      ? `/organization/repository?organization=${repository.organization.id}`\r\n      : `/repository/joined?user=${repository.owner.id}`\r\n\r\n    const isOwned = repository.owner.id === auth.id\r\n    const isJoined = repository.members.find((item: any) => item.id === auth.id)\r\n\r\n    return (\r\n      <article className=\"RepositoryEditor\">\r\n        <div className=\"header\">\r\n          <span className=\"title\">\r\n            <GoRepo className=\"mr6 color-9\" />\r\n            <Link to={`${ownerlink}`}>{repository.organization ? repository.organization.name : repository.owner.fullname}</Link>\r\n            <span className=\"slash\"> / </span>\r\n            <span>{repository.name}</span>\r\n          </span>\r\n          <div className=\"toolbar\">\r\n            {/* 编辑权限：拥有者或者成员 */}\r\n\r\n            {isOwned || isJoined\r\n              ? <span className=\"fake-link edit\" onClick={() => this.setState({ update: true })}><GoPencil /> 编辑</span>\r\n              : null\r\n            }\r\n            <RModal when={this.state.update} onClose={() => this.setState({ update: false })} onResolve={this.handleUpdate}>\r\n              <RepositoryForm title=\"编辑仓库\" repository={repository} />\r\n            </RModal>\r\n            <a href={`${serve}/app/plugin/${repository.id}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"api\"><GoPlug /> 插件</a>\r\n            <a href={`${serve}/repository/get?id=${repository.id}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"api\"><GoDatabase /> 数据</a>\r\n            <a href={`${serve}/test/test.plugin.jquery.html?id=${repository.id}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"api\"><GoJersey /> 测试</a>\r\n            <span className=\"fake-link edit\" onClick={() => this.setState({ exportPostman: true })}><GoLinkExternal /> 导出Postman Collection</span>\r\n            <RModal\r\n              when={this.state.exportPostman}\r\n              onClose={() => this.setState({ exportPostman: false })}\r\n              onResolve={() => this.setState({ exportPostman: false })}\r\n            >\r\n              <ExportPostmanForm title=\"导出到Postman\" repoId={repository.id} />\r\n            </RModal>\r\n          </div>\r\n          <RepositorySearcher repository={repository} />\r\n          <div className=\"desc\">{repository.description}</div>\r\n          <DuplicatedInterfacesWarning repository={repository} />\r\n        </div>\r\n        <div className=\"body\">\r\n          <ModuleList mods={repository.modules} repository={repository} mod={mod} />\r\n          <div className=\"InterfaceWrapper\">\r\n            <InterfaceList itfs={mod.interfaces} repository={repository} mod={mod} itf={itf} />\r\n            <InterfaceEditor itf={itf} properties={properties} mod={mod} repository={repository} />\r\n          </div>\r\n        </div>\r\n      </article>\r\n    )\r\n  }\r\n  handleUpdate = () => {\r\n    const { pathname, hash, search } = this.props.router.location\r\n    this.props.replace(pathname + search + hash)\r\n  }\r\n}\r\n\r\n// 容器组件\r\nconst mapStateToProps = (state: RootState) => ({\r\n  auth: state.auth,\r\n  repository: state.repository,\r\n  router: state.router,\r\n})\r\nconst mapDispatchToProps = ({\r\n  onFetchRepository: fetchRepository,\r\n  onAddRepository: addRepository,\r\n  onUpdateRepository: updateRepository,\r\n  onClearRepository: clearRepository,\r\n  onAddModule: addModule,\r\n  onUpdateModule: updateModule,\r\n  onDeleteModule: deleteModule,\r\n  onSortModuleList: sortModuleList,\r\n  onAddInterface: addInterface,\r\n  onUpdateInterface: updateInterface,\r\n  onDeleteInterface: deleteInterface,\r\n  onLockInterface: lockInterface,\r\n  onUnlockInterface: unlockInterface,\r\n  onSortInterfaceList: sortInterfaceList,\r\n  onAddProperty: addProperty,\r\n  onUpdateProperty: updateProperty,\r\n  onUpdateProperties: updateProperties,\r\n  onDeleteProperty: deleteProperty,\r\n  onSortPropertyList: sortPropertyList,\r\n  replace,\r\n})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(RepositoryEditor)\r\n"],"sourceRoot":""}